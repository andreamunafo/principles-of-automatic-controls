<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.4.552">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>principles-of-automatic-controls - Understanding TCLab</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<script src="../site_libs/quarto-html/quarto.js"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>

  <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<script type="text/javascript">
const typesetMath = (el) => {
  if (window.MathJax) {
    // MathJax Typeset
    window.MathJax.typeset([el]);
  } else if (window.katex) {
    // KaTeX Render
    var mathElements = el.getElementsByClassName("math");
    var macros = [];
    for (var i = 0; i < mathElements.length; i++) {
      var texText = mathElements[i].firstChild;
      if (mathElements[i].tagName == "SPAN") {
        window.katex.render(texText.data, mathElements[i], {
          displayMode: mathElements[i].classList.contains('display'),
          throwOnError: false,
          macros: macros,
          fleqn: false
        });
      }
    }
  }
}
window.Quarto = {
  typesetMath
};
</script>

<link rel="stylesheet" href="../styles.css">
<meta property="og:title" content="principles-of-automatic-controls - Understanding TCLab">
<meta property="og:description" content="Course in feedback control for the University of Pisa">
<meta property="og:site_name" content="principles-of-automatic-controls">
<meta name="twitter:title" content="principles-of-automatic-controls - Understanding TCLab">
<meta name="twitter:description" content="Course in feedback control for the University of Pisa">
<meta name="twitter:card" content="summary">
</head>

<body class="nav-sidebar floating nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="../index.html">
    <span class="navbar-title">principles-of-automatic-controls</span>
    </a>
  </div>
        <div class="quarto-navbar-tools tools-end">
</div>
          <div id="quarto-search" class="" title="Search"></div>
      </div> <!-- /container-fluid -->
    </nav>
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="../TCLab/spacecraft_thermal_control_systems.html">TCLab</a></li><li class="breadcrumb-item"><a href="../TCLab/understanding_tclab.html">Understanding TCLab</a></li></ol></nav>
        <a class="flex-grow-1" role="button" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto">
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Feedback Control</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../faq.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Frequently Asked Questions (FAQ)</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../syllabus.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Syllabus for “Principles of Automatic Control”</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../toc.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Table of Contents</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../update_and_manage_local_changes_guide.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">A Guide to Updating Your Local Repository with Git in Anaconda’s Virtual Environment</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../getting_started_with_python_and_jupyter_notebook.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Getting Started with Python and Jupyter Notebooks</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../intro.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Principles of Automatic Control</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../basics_of_feedback_control.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Introduction to Feedback Control Systems</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../introduction_to_control_problem.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Introduction to the control problem</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../dynamic_systems.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Modeling in Control Systems</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../dynamic_response.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Dynamic response of control systems</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../06_inverse_laplace_transform.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Inverse Laplace Transform: Partial fraction decomposition</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../modeling_dynamic_systems.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Introduction to Modeling of Dynamic Systems</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../control_system_components.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Control System Components</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../models_of_control_devices_and_systems.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Models of Controlled Devices</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../hardware_and_case_studies.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Hardware of Control Systems and Case Studies</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../ac_hardware_and_case_studies.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">AC Motion Control Systems</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../a_first_complete_application.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">A Feedback Control System</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../principles_of_feedback_control.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Principles of Feedback Control</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../feedback_systems_and_their_effects.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Feedback systems and their effects</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../introduction_to_control_systems.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Introduction to Control Systems</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../stability.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Stability Analysis in Control Systems</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../stability_and_routh_criterion.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Stability Analysis in Control Systems</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../performance_of_feedback_systems.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Performance of Feedback Systems</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../design_of_feedback_control.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Design Cycle for a Standard Second-Order System</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../20_Design_of_feedback_control_continued.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Understanding the Standard Second-Order System: Recap</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../steady_state_accuracy_and_design_principles.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Steady State Accuracy and Design Principles</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../compensator_design_using_root_locus.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Compensator Design</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../design_with_the_root_locus.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Design with the Root Locus</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../compensators_and_root_locus.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Compensators and the Root Locus</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../introduction_to_frequency_domain_analysis_in_control_systems.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Introduction to Frequency Domain Analysis in Control Systems</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../application_of_nyquist_stability_criterion.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Application of Nyquist Stability Criterion in Control Systems</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../the_nyquist_stability_criterion_and_relative_stability.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">The Nyquist Stability Criterion and Relative Stability</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../bode_plots.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Bode Plot Analysis</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../feedback_system_performance_based_on_frequency_response.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Feedback System Performance Based On Frequency Response</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../compensator_design_using_frequency_response_plots.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Principles of Automatic Control: Lead and Lag Compensation</span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true">
 <span class="menu-text">IT_TCLab_🇮🇹</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../IT_TCLab_🇮🇹/spacecraft_thermal_control_systems_it.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Il Laboratorio di Controllo della Temperatura</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../IT_TCLab_🇮🇹/tclab_exercises_report_template_it.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Modello di report sugli esercizi TCLab</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../IT_TCLab_🇮🇹/tclab_it.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Il Laboratorio di Controllo della Temperatura</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../IT_TCLab_🇮🇹/understanding_tclab_it.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Comprendere TCLab</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../IT_TCLab_🇮🇹/tclab_lab_1_coding_a_relay_controller_it.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">TCLab Lab 1: Codifica di un controller relè</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../IT_TCLab_🇮🇹/system_model_and_identification_tclab_it.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Modellazione del sistema</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../IT_TCLab_🇮🇹/step_testing_tclab_it.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Passo Test</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../IT_TCLab_🇮🇹/fitting_step_test_data_to_empirical_models_it.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Adattamento dei dati dei test di fase ai modelli empirici</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../IT_TCLab_🇮🇹/tclab_lab_2_model_identification_it.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">TCLab Lab 2: Identificazione del modello</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../IT_TCLab_🇮🇹/tclab_lab_2_fitting_it.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Identificazione del modello: adattamento dei modelli ai dati</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../IT_TCLab_🇮🇹/relay_control_it.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Controllo relè</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../IT_TCLab_🇮🇹/pid_control_it.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Controllo PID</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../IT_TCLab_🇮🇹/lab-assignment-pid-control_it.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Compito di laboratorio: Controllo PID</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../IT_TCLab_🇮🇹/lab-assignment-pi-control_it.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Compito di laboratorio 4: Controllo PI</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="true">
 <span class="menu-text">IT_🇮🇹</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../IT_🇮🇹/faq_it.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Domande frequenti (FAQ)</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../IT_🇮🇹/syllabus_it.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Programma del corso “Principi del controllo automatico”</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../IT_🇮🇹/update_and_manage_local_changes_guide_it.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Aggiornare il Proprio Repository Locale Mantenendo le Modifiche Locali</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../IT_🇮🇹/getting_started_with_python_and_jupyter_notebook_it.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Guida introduttiva ai notebook Python e Jupyter</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../IT_🇮🇹/intro_it.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Principi di controllo automatico</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../IT_🇮🇹/basics_of_feedback_control_it.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Introduzione ai sistemi di controllo del feedback</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../IT_🇮🇹/introduction_to_control_problem_it.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Introduzione al problema del controllo</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../IT_🇮🇹/dynamic_systems_it.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Modellazione nei sistemi di controllo</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../IT_🇮🇹/dynamic_response_it.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Risposta dinamica dei sistemi di controllo</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../IT_🇮🇹/06_inverse_laplace_transform_it.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Trasformata di Laplace inversa: scomposizione parziale di frazioni</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../IT_🇮🇹/modeling_dynamic_systems_it.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Introduzione alla modellazione dei sistemi dinamici</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../IT_🇮🇹/control_system_components_it.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Componenti del sistema di controllo</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../IT_🇮🇹/models_of_control_devices_and_systems_it.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Modelli di dispositivi controllati</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../IT_🇮🇹/hardware_and_case_studies_it.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Hardware dei sistemi di controllo e casi di studio</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../IT_🇮🇹/ac_hardware_and_case_studies_it.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Sistemi di controllo del movimento CA</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../IT_🇮🇹/a_first_complete_application_it.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Un sistema di controllo del feedback</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../IT_🇮🇹/principles_of_feedback_control_it.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Principi di controllo del feedback</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../IT_🇮🇹/feedback_systems_and_their_effects_it.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Sistemi di feedback e loro effetti</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../IT_🇮🇹/introduction_to_control_systems_it.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Introduzione ai sistemi di controllo</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../IT_🇮🇹/stability_it.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Analisi di stabilità nei sistemi di controllo</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../IT_🇮🇹/stability_and_routh_criterion_it.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Analisi di stabilità nei sistemi di controllo</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../IT_🇮🇹/performance_of_feedback_systems_it.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Prestazioni dei sistemi di feedback</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../IT_🇮🇹/design_of_feedback_control_it.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Ciclo di progettazione per un sistema standard del secondo ordine</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../IT_🇮🇹/20_Design_of_feedback_control_continued_it.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Comprensione del sistema standard del secondo ordine: riepilogo</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../IT_🇮🇹/steady_state_accuracy_and_design_principles_it.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Precisione dello stato stazionario e principi di progettazione</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../IT_🇮🇹/compensator_design_using_root_locus_it.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Progettazione del compensatore</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../IT_🇮🇹/design_with_the_root_locus_it.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Progettare con il luogo delle radici</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../IT_🇮🇹/compensators_and_root_locus_it.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Compensatori e luogo delle radici</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../IT_🇮🇹/introduction_to_frequency_domain_analysis_in_control_systems_it.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Introduzione all’analisi nel dominio della frequenza nei sistemi di controllo</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../IT_🇮🇹/application_of_nyquist_stability_criterion_it.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Applicazione del criterio di stabilità di Nyquist nei sistemi di controllo</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../IT_🇮🇹/the_nyquist_stability_criterion_and_relative_stability_it.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Il criterio di stabilità di Nyquist e la stabilità relativa</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../IT_🇮🇹/bode_plots_it.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Analisi del diagramma di Bode</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../IT_🇮🇹/feedback_system_performance_based_on_frequency_response_it.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Prestazioni del sistema di feedback basate sulla risposta in frequenza</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../IT_🇮🇹/index_it.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Syllabus - Fondamenti di Automatica</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" aria-expanded="true">
 <span class="menu-text">TCLab</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-3" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../TCLab/spacecraft_thermal_control_systems.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">The Temperature Control Laboratory</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../TCLab/tclab_exercises_report_template.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">TCLab Exercises Report Template</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../TCLab/tclab.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">The Temperature Control Lab</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../TCLab/understanding_tclab.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text">Understanding TCLab</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../TCLab/tclab_lab_1_coding_a_relay_controller-solution.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">TCLab Lab 1: Coding a relay controller</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../TCLab/tclab_lab_1_coding_a_relay_controller.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">TCLab Lab 1: Coding a relay controller</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../TCLab/system_model_and_identification_tclab.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">System Modeling</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../TCLab/step_testing_tclab.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Step Testing</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../TCLab/fitting_step_test_data_to_empirical_models.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Fitting Step Test Data to Empirical Models</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../TCLab/tclab_lab_2_model_identification.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">TCLab Lab 2: Model Identification</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../TCLab/tclab_lab_2_model_identification_solutions.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">TCLab Lab 2: Model Identification</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../TCLab/tclab_lab_2_fitting.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Model Identification: Fitting models to data</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../TCLab/relay_control.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Relay Control</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../TCLab/pid_control.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">PID Control</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../TCLab/lab-assignment-pid-control.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Lab Assignment: PID Control</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../TCLab/lab-assignment-pi-control.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Lab Assignment 4: PI Control</span></a>
  </div>
</li>
      </ul>
  </li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#the-tclab-python-package" id="toc-the-tclab-python-package" class="nav-link active" data-scroll-target="#the-tclab-python-package">The TCLab Python Package</a>
  <ul class="collapse">
  <li><a href="#the-core-components-of-tclab" id="toc-the-core-components-of-tclab" class="nav-link" data-scroll-target="#the-core-components-of-tclab">The Core Components of TCLab</a>
  <ul class="collapse">
  <li><a href="#operational-configurations-of-tclab" id="toc-operational-configurations-of-tclab" class="nav-link" data-scroll-target="#operational-configurations-of-tclab">Operational Configurations of TCLab</a></li>
  </ul></li>
  <li><a href="#how-tclab-works" id="toc-how-tclab-works" class="nav-link" data-scroll-target="#how-tclab-works">How TCLab Works</a></li>
  <li><a href="#tclab-schematics" id="toc-tclab-schematics" class="nav-link" data-scroll-target="#tclab-schematics">TCLab Schematics</a></li>
  </ul></li>
  <li><a href="#setting-up-tclab" id="toc-setting-up-tclab" class="nav-link" data-scroll-target="#setting-up-tclab">Setting Up TCLab</a>
  <ul class="collapse">
  <li><a href="#section-1-installing-python-using-conda" id="toc-section-1-installing-python-using-conda" class="nav-link" data-scroll-target="#section-1-installing-python-using-conda">Section 1: Installing Python Using Conda</a></li>
  <li><a href="#installing-python-on-mac" id="toc-installing-python-on-mac" class="nav-link" data-scroll-target="#installing-python-on-mac">Installing Python on Mac</a>
  <ul class="collapse">
  <li><a href="#step-1-install-anaconda" id="toc-step-1-install-anaconda" class="nav-link" data-scroll-target="#step-1-install-anaconda">Step 1: Install Anaconda</a></li>
  <li><a href="#step-2-set-up-environment-optional" id="toc-step-2-set-up-environment-optional" class="nav-link" data-scroll-target="#step-2-set-up-environment-optional">Step 2: Set Up Environment (Optional)</a></li>
  </ul></li>
  <li><a href="#installing-python-on-windows" id="toc-installing-python-on-windows" class="nav-link" data-scroll-target="#installing-python-on-windows">Installing Python on Windows</a>
  <ul class="collapse">
  <li><a href="#step-1-install-anaconda-1" id="toc-step-1-install-anaconda-1" class="nav-link" data-scroll-target="#step-1-install-anaconda-1">Step 1: Install Anaconda</a></li>
  <li><a href="#step-2-set-up-environment-optional-1" id="toc-step-2-set-up-environment-optional-1" class="nav-link" data-scroll-target="#step-2-set-up-environment-optional-1">Step 2: Set Up Environment (Optional)</a></li>
  </ul></li>
  <li><a href="#installing-python-on-linux" id="toc-installing-python-on-linux" class="nav-link" data-scroll-target="#installing-python-on-linux">Installing Python on Linux</a>
  <ul class="collapse">
  <li><a href="#step-1-install-anaconda-2" id="toc-step-1-install-anaconda-2" class="nav-link" data-scroll-target="#step-1-install-anaconda-2">Step 1: Install Anaconda</a></li>
  <li><a href="#step-2-set-up-environment-optional-2" id="toc-step-2-set-up-environment-optional-2" class="nav-link" data-scroll-target="#step-2-set-up-environment-optional-2">Step 2: Set Up Environment (Optional)</a></li>
  </ul></li>
  </ul></li>
  <li><a href="#section-2-setting-up-tclab" id="toc-section-2-setting-up-tclab" class="nav-link" data-scroll-target="#section-2-setting-up-tclab">Section 2: Setting Up TCLab</a>
  <ul class="collapse">
  <li><a href="#setting-up-the-conda-environment" id="toc-setting-up-the-conda-environment" class="nav-link" data-scroll-target="#setting-up-the-conda-environment">Setting Up the Conda Environment</a>
  <ul class="collapse">
  <li><a href="#installing-the-tclab-package" id="toc-installing-the-tclab-package" class="nav-link" data-scroll-target="#installing-the-tclab-package">Installing the TCLab Package</a></li>
  </ul></li>
  <li><a href="#initial-tests-with-tclab" id="toc-initial-tests-with-tclab" class="nav-link" data-scroll-target="#initial-tests-with-tclab">Initial Tests with TCLab</a>
  <ul class="collapse">
  <li><a href="#step-1-connect-tclab" id="toc-step-1-connect-tclab" class="nav-link" data-scroll-target="#step-1-connect-tclab">Step 1: Connect TCLab</a></li>
  <li><a href="#step-2-test-tclab-connection" id="toc-step-2-test-tclab-connection" class="nav-link" data-scroll-target="#step-2-test-tclab-connection">Step 2: Test TCLab Connection</a></li>
  </ul></li>
  <li><a href="#using-tclab-simulator" id="toc-using-tclab-simulator" class="nav-link" data-scroll-target="#using-tclab-simulator">Using TCLab Simulator</a>
  <ul class="collapse">
  <li><a href="#importing" id="toc-importing" class="nav-link" data-scroll-target="#importing">Importing</a></li>
  <li><a href="#using-tclab-with-pythons-with-statement" id="toc-using-tclab-with-pythons-with-statement" class="nav-link" data-scroll-target="#using-tclab-with-pythons-with-statement">Using TCLab with Python’s <code>with</code> statement</a></li>
  </ul></li>
  <li><a href="#reading-temperatures" id="toc-reading-temperatures" class="nav-link" data-scroll-target="#reading-temperatures">Reading Temperatures</a></li>
  <li><a href="#setting-heaters" id="toc-setting-heaters" class="nav-link" data-scroll-target="#setting-heaters">Setting Heaters</a></li>
  <li><a href="#synchronizing-with-real-time-using-clock" id="toc-synchronizing-with-real-time-using-clock" class="nav-link" data-scroll-target="#synchronizing-with-real-time-using-clock">Synchronizing with Real Time using <code>clock</code></a>
  <ul class="collapse">
  <li><a href="#using-clock-with-tclab" id="toc-using-clock-with-tclab" class="nav-link" data-scroll-target="#using-clock-with-tclab">Using <code>clock</code> with TCLab</a></li>
  </ul></li>
  <li><a href="#the-tclab-historian" id="toc-the-tclab-historian" class="nav-link" data-scroll-target="#the-tclab-historian">The TCLab <code>Historian</code></a></li>
  <li><a href="#the-tclab-plotter" id="toc-the-tclab-plotter" class="nav-link" data-scroll-target="#the-tclab-plotter">The TCLab <code>Plotter</code></a></li>
  <li><a href="#using-tclab-offline" id="toc-using-tclab-offline" class="nav-link" data-scroll-target="#using-tclab-offline">Using TCLab Offline</a></li>
  <li><a href="#running-diagnostics" id="toc-running-diagnostics" class="nav-link" data-scroll-target="#running-diagnostics">Running Diagnostics</a></li>
  </ul></li>
  </ul>
<div class="toc-actions"><ul><li><a href="https://github.com/andreamunafo/principles-of-automatic-controls/issues/new" class="toc-action"><i class="bi bi-github"></i>Report an issue</a></li></ul></div></nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default"><nav class="quarto-page-breadcrumbs quarto-title-breadcrumbs d-none d-lg-block" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="../TCLab/spacecraft_thermal_control_systems.html">TCLab</a></li><li class="breadcrumb-item"><a href="../TCLab/understanding_tclab.html">Understanding TCLab</a></li></ol></nav>
<div class="quarto-title">
<h1 class="title">Understanding TCLab</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<!-- WARNING: THIS FILE WAS AUTOGENERATED! DO NOT EDIT! -->
<div id="4fabaf21" class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a>a<span class="op">=</span><span class="dv">456</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<section id="the-tclab-python-package" class="level1">
<h1>The TCLab Python Package</h1>
<p>The accompanying diagram shows how to access the temperature contol laboratory using the TCLab library.</p>
<p><img src="./pics/B.00-TCLabOverview.png" style="float: right;padding-left:30px;"></p>
<p><strong><em>Jupyter notebooks and Python scripts:</em></strong> The highest level consists of the you code you write to implement control algorithms. This can be done in Jupyter/Python notebooks, directly from Python using a development environment such as Spyder or PyCharm. This repository contains several examples, lessons, and student projects.</p>
<p><strong><em>TCLab:</em></strong> <a href="https://github.com/jckantor/TCLab">TCLab</a> consists of a Python library entitled <code>tclab</code> that provides high-level access to sensors, heaters, a pseudo-realtime clock. The package includes <code>TCLab()</code> class that creates an object to access to the device, an iterator <code>clock</code> for synchronizing with a real time clock, <code>Historian()</code> class to create objects for data logging, and a <code>Plotter()</code> class to visualize data in realtime.</p>
<p><strong><em>TCLab-sketch:</em></strong> The <a href="https://github.com/jckantor/TCLab-sketch">TCLab-sketch</a> github repository provides firmware to ensure intrisically safe operation of the Arduino board and shield. The sketch is downloaded to the Arduino using the <a href="https://www.arduino.cc/en/Main/Software">Arduino IDE</a>. Loading firmware to the Arduino is a one-time operation.</p>
<p><strong><em>Arduino:</em></strong> The hardware platform for the Temperature Control Laboratory. The Python tools and libraries have been tested with the Arduino Uno and Arduino Leonardo boards.</p>
<p><em>From: <a href="https://jckantor.github.io/CBE32338/">CBE32338</a></em></p>
<section id="the-core-components-of-tclab" class="level2">
<h2 class="anchored" data-anchor-id="the-core-components-of-tclab">The Core Components of TCLab</h2>
<p><img src="pics/tclab_heater.png" style="float: right; padding-left:0px; width:500px;"> <img src="pics/tclab_temperature_sensor.png" style="float: right; padding-left:0px; width:500px;"> <img src="pics/tclab_radiator.png" style="float: right; padding-left:0px; width:500px;"></p>
<p>The Temperature Control Lab (TCLab) is an integrated system composed of several key components, each contributing significantly to its functionality:</p>
<ol type="1">
<li><strong>Arduino Microcontroller</strong>:
<ul>
<li><strong>Purpose</strong>: Serves as the central processing unit for the TCLab.</li>
<li><strong>Functionality</strong>: Processes input data from temperature sensors and manages the operation of heaters.</li>
<li><strong>Connectivity</strong>: Utilizes a USB connection for data transfer and allows for real-time control through Python scripts.</li>
</ul></li>
<li><strong>Heaters</strong>:
<ul>
<li><strong>Description</strong>: TCLab features two heaters, each capable of generating adjustable thermal energy.</li>
<li><strong>Role</strong>: Act as the main heat sources for experiments, replicating scenarios requiring temperature regulation. They function as the system’s <strong>actuators</strong>.</li>
</ul></li>
<li><strong>Temperature Sensors</strong>:
<ul>
<li><strong>Type</strong>: These sensors are thermistors, a kind of resistor whose resistance varies with temperature changes.</li>
<li><strong>Measurement Range</strong>: Capable of measuring temperatures ranging from <span class="math inline">\(-40^\circ\)</span>C to <span class="math inline">\(150^\circ\)</span>C.</li>
<li><strong>Functionality</strong>: Positioned near each heater to accurately measure temperature, providing essential feedback for temperature control.</li>
</ul></li>
<li><strong>Heat Sinks</strong>:
<ul>
<li><strong>Type</strong>: Comprised of transistor heat sinks.</li>
<li><strong>Purpose</strong>: Employed to efficiently dissipate heat away from the transistors.</li>
</ul></li>
<li><strong>LED (Light Emitting Diode)</strong>:</li>
</ol>
<ul>
<li><strong>Purpose</strong>: Serves as a visual indicator for various states or actions, such as signaling the activation of a heater.</li>
</ul>
<section id="operational-configurations-of-tclab" class="level3">
<h3 class="anchored" data-anchor-id="operational-configurations-of-tclab">Operational Configurations of TCLab</h3>
<p>TCLab can be configured in various modes depending on the educational objectives:</p>
<ol type="1">
<li><strong>Single Input Single Output (SISO)</strong>:
<ul>
<li>Utilizes only one heater and one sensor. Ideal for simple control experiments and learning the basics of temperature control.</li>
</ul></li>
<li><strong>Single Input Single Output (SISO) with Disturbance</strong>:
<ul>
<li>Employs one heater/sensor as the primary control system and the second heater as a source of external disturbance. This setup is useful for understanding how external factors influence control systems.</li>
</ul></li>
<li><strong>Multiple Inputs Multiple Outputs (MIMO)</strong>:
<ul>
<li>Involves using both heaters and sensors simultaneously. This more advanced configuration isn’t covered here but is valuable for complex control system studies.</li>
</ul></li>
</ol>
<p>Each component of the TCLab plays a specific role, making it a versatile tool for teaching and experimenting with various aspects of control engineering. Whether for fundamental learning or advanced exploration, TCLab offers a practical platform for understanding the dynamics and control of temperature-based systems.</p>
</section>
</section>
<section id="how-tclab-works" class="level2">
<h2 class="anchored" data-anchor-id="how-tclab-works">How TCLab Works</h2>
<ul>
<li><strong>Operation Flow</strong>:
<ol type="1">
<li><strong>Input Signal</strong>: A Python script sends a command to the Arduino, setting the desired power level for the heaters.</li>
<li><strong>Heating Action</strong>: The heaters generate heat corresponding to the received power level commands.</li>
<li><strong>Temperature Measurement</strong>: The thermistors measure the resulting temperatures near the heaters.</li>
<li><strong>Feedback Loop</strong>: These temperature readings are sent back to the computer.</li>
<li><strong>Adjustments</strong>: The control algorithm in the Python script adjusts the heater power based on the temperature feedback, striving to reach and maintain a target temperature.</li>
</ol></li>
</ul>
<p><strong>[Insert Flowchart or Diagram Showing the Feedback Loop Here]</strong></p>
<hr>
</section>
<section id="tclab-schematics" class="level2">
<h2 class="anchored" data-anchor-id="tclab-schematics">TCLab Schematics</h2>
<table>
<tbody><tr>
<td>
<img src="./pics/tclab_schematic.png" alt="tclab_schematic" style="width: 450px;"><br>

</td>
</tr>
</tbody></table>
</section>
</section>
<section id="setting-up-tclab" class="level1">
<h1>Setting Up TCLab</h1>
<p>This guide provides step-by-step instructions for setting up the Temperature Control Lab (TCLab), starting from installing Python on different operating systems to conducting initial tests with TCLab and its simulator.</p>
<section id="section-1-installing-python-using-conda" class="level2">
<h2 class="anchored" data-anchor-id="section-1-installing-python-using-conda">Section 1: Installing Python Using Conda</h2>
</section>
<section id="installing-python-on-mac" class="level2">
<h2 class="anchored" data-anchor-id="installing-python-on-mac">Installing Python on Mac</h2>
<section id="step-1-install-anaconda" class="level3">
<h3 class="anchored" data-anchor-id="step-1-install-anaconda">Step 1: Install Anaconda</h3>
<ul>
<li><strong>Download Anaconda</strong>: Visit the <a href="https://www.anaconda.com/products/individual">Anaconda Download Page</a> and download the installer for Mac.</li>
<li><strong>Run Installer</strong>: Open the downloaded file and follow the on-screen instructions.</li>
<li><strong>Verify Installation</strong>:
<ul>
<li>Open Terminal.</li>
<li>Type <code>conda --version</code> and press Enter. If Anaconda is successfully installed, you’ll see the version number.</li>
</ul></li>
</ul>
</section>
<section id="step-2-set-up-environment-optional" class="level3">
<h3 class="anchored" data-anchor-id="step-2-set-up-environment-optional">Step 2: Set Up Environment (Optional)</h3>
<ul>
<li><strong>Create a New Environment</strong>: In Terminal, type <code>conda create -n tclab_env python=3.8</code> and press Enter.</li>
<li><strong>Activate Environment</strong>: Type <code>conda activate tclab_env</code> and press Enter.</li>
</ul>
</section>
</section>
<section id="installing-python-on-windows" class="level2">
<h2 class="anchored" data-anchor-id="installing-python-on-windows">Installing Python on Windows</h2>
<section id="step-1-install-anaconda-1" class="level3">
<h3 class="anchored" data-anchor-id="step-1-install-anaconda-1">Step 1: Install Anaconda</h3>
<ul>
<li><strong>Download Anaconda</strong>: Visit the <a href="https://www.anaconda.com/products/individual">Anaconda Download Page</a> and download the installer for Windows.</li>
<li><strong>Run Installer</strong>: Open the downloaded file and follow the on-screen instructions.</li>
<li><strong>Verify Installation</strong>:
<ul>
<li>Open Anaconda Prompt.</li>
<li>Type <code>conda --version</code> and press Enter.</li>
</ul></li>
</ul>
</section>
<section id="step-2-set-up-environment-optional-1" class="level3">
<h3 class="anchored" data-anchor-id="step-2-set-up-environment-optional-1">Step 2: Set Up Environment (Optional)</h3>
<ul>
<li><strong>Create a New Environment</strong>: In Anaconda Prompt, type <code>conda create -n tclab_env python=3.8</code> and press Enter.</li>
<li><strong>Activate Environment</strong>: Type <code>conda activate tclab_env</code> and press Enter.</li>
</ul>
</section>
</section>
<section id="installing-python-on-linux" class="level2">
<h2 class="anchored" data-anchor-id="installing-python-on-linux">Installing Python on Linux</h2>
<section id="step-1-install-anaconda-2" class="level3">
<h3 class="anchored" data-anchor-id="step-1-install-anaconda-2">Step 1: Install Anaconda</h3>
<ul>
<li><strong>Download Anaconda</strong>: Visit the <a href="https://www.anaconda.com/products/individual">Anaconda Download Page</a> and download the installer for Linux.</li>
<li><strong>Run Installer</strong>: Open Terminal, navigate to the directory containing the downloaded file, and run the script using <code>bash Anaconda3-XXXX.sh</code>.</li>
<li><strong>Verify Installation</strong>:
<ul>
<li>In Terminal, type <code>conda --version</code>.</li>
</ul></li>
</ul>
</section>
<section id="step-2-set-up-environment-optional-2" class="level3">
<h3 class="anchored" data-anchor-id="step-2-set-up-environment-optional-2">Step 2: Set Up Environment (Optional)</h3>
<ul>
<li><strong>Create a New Environment</strong>: In Terminal, type <code>conda create -n tclab_env python=3.8</code> and press Enter.</li>
<li><strong>Activate Environment</strong>: Type <code>conda activate tclab_env</code> and press Enter.</li>
</ul>
<hr>
</section>
</section>
</section>
<section id="section-2-setting-up-tclab" class="level1">
<h1>Section 2: Setting Up TCLab</h1>
<section id="setting-up-the-conda-environment" class="level2">
<h2 class="anchored" data-anchor-id="setting-up-the-conda-environment">Setting Up the Conda Environment</h2>
<p>To set up the Conda environment for this course, follow these steps:</p>
<ol type="1">
<li>Download the <code>tclab_environment.yml</code> file from this repository.</li>
<li>Open your terminal or Anaconda Prompt and navigate to the directory where the file is located.</li>
</ol>
<p>The file <code>tclab_environment.yml</code> looks like this:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode tclab_environment.yml code-with-copy"><code class="sourceCode yaml"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="fu">name</span><span class="kw">:</span><span class="at"> tclab_env</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a><span class="fu">channels</span><span class="kw">:</span></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="kw">-</span><span class="at"> defaults</span></span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a><span class="fu">dependencies</span><span class="kw">:</span></span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="kw">-</span><span class="at"> python=3.10</span></span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="kw">-</span><span class="at"> pip</span></span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="kw">-</span><span class="at"> numpy</span></span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="kw">-</span><span class="at"> matplotlib</span></span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="kw">-</span><span class="at"> scipy</span></span>
<span id="cb2-10"><a href="#cb2-10" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="kw">-</span><span class="at"> pandas</span></span>
<span id="cb2-11"><a href="#cb2-11" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="kw">-</span><span class="at"> </span><span class="fu">pip</span><span class="kw">:</span></span>
<span id="cb2-12"><a href="#cb2-12" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="kw">-</span><span class="at"> tclab</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<ol start="3" type="1">
<li><p>Create the environment from the <code>tclab_environment.yml</code> file:</p>
<p><code>conda env create -f tclab_environment.yml</code></p></li>
<li><p>Activate the new environment:</p>
<p><code>conda activate tclab</code></p></li>
<li><p>To verify that the environment was installed correctly, you can use:</p>
<p><code>conda env list</code></p></li>
</ol>
<section id="installing-the-tclab-package" class="level3">
<h3 class="anchored" data-anchor-id="installing-the-tclab-package">Installing the TCLab Package</h3>
<ol type="1">
<li><p><strong>Activating the Environment</strong>:</p>
<ul>
<li><p>Ensure your Anaconda environment is active. Open your Terminal (or Anaconda Prompt on Windows) and activate your environment:</p>
<pre><code>conda activate tclab_env</code></pre></li>
</ul></li>
<li><p><strong>Installing TCLab</strong>:</p>
<ul>
<li><p>The <code>tclab</code> library interfaces with the Temperature Control Lab hardware. Install it by entering the following command from a window (MacOS) or command window (PC):</p>
<pre><code>pip install tclab</code></pre></li>
<li><p>Press Enter to execute the command and complete the installation.</p></li>
</ul>
<p>Alternatively, the installation can be performed from within a Jupyter/Python notebook with the command</p>
<pre><code>!pip install tclab</code></pre>
<p>There are occasional updates to the library. These can be installed by appending a <code>--upgrade</code> to the above commands and demonstrated in the next cell.</p></li>
</ol>
<div id="7735a7f6" class="cell">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="op">!</span>python <span class="op">-</span>m pip install tclab <span class="op">--</span>upgrade</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Requirement already satisfied: tclab in /Users/andreamunafo/opt/anaconda3/envs/tclab/lib/python3.10/site-packages (1.0.0)
Requirement already satisfied: pyserial in /Users/andreamunafo/opt/anaconda3/envs/tclab/lib/python3.10/site-packages (from tclab) (3.5)</code></pre>
</div>
</div>
<section id="installing-additional-useful-libraries" class="level4">
<h4 class="anchored" data-anchor-id="installing-additional-useful-libraries">Installing Additional Useful Libraries</h4>
<p>For a comprehensive experience with TCLab and to support various aspects of control engineering and data analysis, the following libraries will also be installed:</p>
<ol type="1">
<li><strong>numpy</strong>:
<ul>
<li><p>Significance: A fundamental library for numerical computations in Python.</p></li>
<li><p>Installation Command:</p>
<pre><code>pip install numpy</code></pre></li>
</ul></li>
<li><strong>matplotlib</strong>:
<ul>
<li><p>Significance: Crucial for creating visual representations of data, especially for the analysis of TCLab experiments.</p></li>
<li><p>Installation Command:</p>
<pre><code>pip install matplotlib</code></pre></li>
</ul></li>
<li><strong>scipy</strong>:
<ul>
<li><p>Significance: Provides a broad range of tools for scientific computing, including methods for solving ordinary differential equations, useful in system modeling.</p></li>
<li><p>Installation Command:</p>
<pre><code>pip install scipy</code></pre></li>
</ul></li>
<li><strong>pandas</strong>:
<ul>
<li><p>Significance: Offers extensive features for data manipulation and analysis, ideal for handling complex datasets.</p></li>
<li><p>Installation Command:</p>
<pre><code>pip install pandas</code></pre></li>
</ul></li>
<li><strong>gekko</strong>:
<ul>
<li><p>Significance: Advanced package for optimization and control, suitable for implementing model predictive control strategies.</p></li>
<li><p>Installation Command:</p>
<pre><code>pip install gekko</code></pre></li>
</ul></li>
</ol>
</section>
</section>
</section>
<section id="initial-tests-with-tclab" class="level2">
<h2 class="anchored" data-anchor-id="initial-tests-with-tclab">Initial Tests with TCLab</h2>
<section id="step-1-connect-tclab" class="level3">
<h3 class="anchored" data-anchor-id="step-1-connect-tclab">Step 1: Connect TCLab</h3>
<ul>
<li><strong>Connect TCLab</strong>: Plug in the TCLab device to your computer using a USB cable.</li>
</ul>
</section>
<section id="step-2-test-tclab-connection" class="level3">
<h3 class="anchored" data-anchor-id="step-2-test-tclab-connection">Step 2: Test TCLab Connection</h3>
<ul>
<li><strong>Write Test Script</strong>:
<ul>
<li>Open your Python IDE or Jupyter Notebook.</li>
<li>Write the following Python code and run the script. If it prints the temperature, TCLab is connected properly.</li>
</ul></li>
</ul>
<div id="2451e03d" class="cell">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> tclab</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="457ddd4c" class="cell">
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="cf">with</span> tclab.TCLab() <span class="im">as</span> lab:</span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="ss">f"Connected! Heater 1 is at </span><span class="sc">{</span>lab<span class="sc">.</span>T1<span class="sc">}</span><span class="ss">°C"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>TCLab version 1.0.0
Arduino Leonardo connected on port /dev/cu.usbmodem142101 at 115200 baud.
TCLab Firmware 3.0.0 Arduino Leonardo/Micro.
Connected! Heater 1 is at 24.024°C
TCLab disconnected successfully.</code></pre>
</div>
</div>
</section>
</section>
<section id="using-tclab-simulator" class="level2">
<h2 class="anchored" data-anchor-id="using-tclab-simulator">Using TCLab Simulator</h2>
<ul>
<li><strong>Why Use a Simulator</strong>: The TCLab simulator is useful when you don’t have the physical hardware available.</li>
<li><strong>Install Simulator</strong>: In Terminal or Anaconda Prompt, type <code>pip install tclab</code> again (it includes the simulator).</li>
<li><strong>Test Script with Simulator</strong>:</li>
</ul>
<div id="048958f2" class="cell">
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> tclab <span class="im">import</span> TCLabModel <span class="im">as</span> TCLab, setup, clock</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="9874fce2" class="cell">
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="cf">with</span> TCLab() <span class="im">as</span> lab:</span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> t <span class="kw">in</span> clock(<span class="dv">200</span>, <span class="dv">2</span>):</span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a>        <span class="bu">print</span>(<span class="ss">f"Time </span><span class="sc">{</span>t<span class="sc">}</span><span class="ss"> seconds. T1: </span><span class="sc">{</span>lab<span class="sc">.</span>T1<span class="sc">}</span><span class="ss">°C"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>TCLab version 1.0.0
Simulated TCLab
Time 0 seconds. T1: 20.949499999999997°C
Time 2.01 seconds. T1: 20.949499999999997°C
Time 4.24 seconds. T1: 20.949499999999997°C
Time 6.23 seconds. T1: 20.949499999999997°C
Time 8.22 seconds. T1: 20.949499999999997°C
Time 10.18 seconds. T1: 20.949499999999997°C
Time 12.18 seconds. T1: 20.949499999999997°C
Time 14.2 seconds. T1: 20.6272°C
Time 16.15 seconds. T1: 20.949499999999997°C
Time 18.01 seconds. T1: 20.949499999999997°C
Time 20.23 seconds. T1: 20.949499999999997°C
Time 22.17 seconds. T1: 20.6272°C
Time 24.12 seconds. T1: 20.949499999999997°C
Time 26.02 seconds. T1: 20.949499999999997°C
Time 28.02 seconds. T1: 20.949499999999997°C
Time 30.02 seconds. T1: 20.949499999999997°C
Time 32.15 seconds. T1: 20.949499999999997°C
Time 34.09 seconds. T1: 20.949499999999997°C
Time 36.03 seconds. T1: 20.949499999999997°C
Time 38.21 seconds. T1: 20.949499999999997°C
Time 40.25 seconds. T1: 20.949499999999997°C
Time 42.25 seconds. T1: 20.949499999999997°C
Time 44.13 seconds. T1: 20.949499999999997°C
Time 46.28 seconds. T1: 20.949499999999997°C
Time 48.17 seconds. T1: 20.949499999999997°C
Time 50.15 seconds. T1: 20.949499999999997°C
Time 52.04 seconds. T1: 20.6272°C
Time 54.27 seconds. T1: 20.949499999999997°C
Time 56.04 seconds. T1: 20.949499999999997°C
Time 58.04 seconds. T1: 20.949499999999997°C
Time 60.06 seconds. T1: 20.949499999999997°C
Time 62.19 seconds. T1: 20.949499999999997°C
Time 64.04 seconds. T1: 20.949499999999997°C
Time 66.14 seconds. T1: 20.949499999999997°C
Time 68.21 seconds. T1: 20.949499999999997°C
Time 70.25 seconds. T1: 20.949499999999997°C
Time 72.14 seconds. T1: 20.949499999999997°C
Time 74.26 seconds. T1: 20.949499999999997°C
Time 76.16 seconds. T1: 20.949499999999997°C
Time 78.03 seconds. T1: 20.949499999999997°C
Time 80.2 seconds. T1: 20.949499999999997°C
Time 82.09 seconds. T1: 20.949499999999997°C
Time 84.11 seconds. T1: 20.6272°C
Time 86.29 seconds. T1: 20.949499999999997°C
Time 88.01 seconds. T1: 20.949499999999997°C
Time 90.26 seconds. T1: 20.949499999999997°C
Time 92.0 seconds. T1: 20.949499999999997°C
Time 94.2 seconds. T1: 20.949499999999997°C
Time 96.14 seconds. T1: 20.949499999999997°C
Time 98.08 seconds. T1: 20.949499999999997°C
Time 100.02 seconds. T1: 20.949499999999997°C
Time 102.26 seconds. T1: 20.949499999999997°C
Time 104.28 seconds. T1: 20.949499999999997°C
Time 106.08 seconds. T1: 20.949499999999997°C
Time 108.16 seconds. T1: 20.949499999999997°C
Time 110.25 seconds. T1: 20.949499999999997°C
Time 112.2 seconds. T1: 20.949499999999997°C
Time 114.0 seconds. T1: 20.949499999999997°C
Time 116.06 seconds. T1: 20.949499999999997°C
Time 118.02 seconds. T1: 20.6272°C
Time 120.0 seconds. T1: 20.949499999999997°C
Time 122.01 seconds. T1: 20.6272°C
Time 124.09 seconds. T1: 20.6272°C
Time 126.16 seconds. T1: 20.6272°C
Time 128.1 seconds. T1: 20.949499999999997°C
Time 130.01 seconds. T1: 20.949499999999997°C
Time 132.01 seconds. T1: 20.949499999999997°C
Time 134.25 seconds. T1: 20.949499999999997°C
Time 136.23 seconds. T1: 20.949499999999997°C
Time 138.23 seconds. T1: 20.949499999999997°C
Time 140.19 seconds. T1: 20.949499999999997°C
Time 142.06 seconds. T1: 20.949499999999997°C
Time 144.21 seconds. T1: 20.6272°C
Time 146.02 seconds. T1: 20.949499999999997°C
Time 148.08 seconds. T1: 20.949499999999997°C
Time 150.09 seconds. T1: 20.949499999999997°C
Time 152.02 seconds. T1: 20.949499999999997°C
Time 154.02 seconds. T1: 20.949499999999997°C
Time 156.21 seconds. T1: 20.949499999999997°C
Time 158.23 seconds. T1: 20.949499999999997°C
Time 160.02 seconds. T1: 20.949499999999997°C
Time 162.24 seconds. T1: 20.949499999999997°C
Time 164.12 seconds. T1: 20.949499999999997°C
Time 166.29 seconds. T1: 20.949499999999997°C
Time 168.06 seconds. T1: 20.949499999999997°C
Time 170.19 seconds. T1: 20.949499999999997°C
Time 172.19 seconds. T1: 20.949499999999997°C
Time 174.27 seconds. T1: 20.949499999999997°C
Time 176.27 seconds. T1: 20.949499999999997°C
Time 178.07 seconds. T1: 20.949499999999997°C
Time 180.13 seconds. T1: 20.949499999999997°C
Time 182.19 seconds. T1: 20.6272°C
Time 184.03 seconds. T1: 20.949499999999997°C
Time 186.23 seconds. T1: 20.949499999999997°C
Time 188.04 seconds. T1: 20.949499999999997°C
Time 190.16 seconds. T1: 20.6272°C
Time 192.25 seconds. T1: 20.949499999999997°C
Time 194.06 seconds. T1: 20.949499999999997°C
Time 196.0 seconds. T1: 20.949499999999997°C
Time 198.24 seconds. T1: 20.949499999999997°C
Time 200.01 seconds. T1: 20.949499999999997°C
TCLab Model disconnected successfully.</code></pre>
</div>
</div>
<div id="3bdb3466" class="cell">
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> tclab <span class="im">import</span> setup, clock</span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a>TCLab <span class="op">=</span> setup(connected<span class="op">=</span><span class="va">False</span>, speedup<span class="op">=</span><span class="dv">5</span>)</span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-4"><a href="#cb19-4" aria-hidden="true" tabindex="-1"></a><span class="cf">with</span> TCLab() <span class="im">as</span> lab:</span>
<span id="cb19-5"><a href="#cb19-5" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> t <span class="kw">in</span> clock(<span class="dv">200</span>, <span class="dv">2</span>):</span>
<span id="cb19-6"><a href="#cb19-6" aria-hidden="true" tabindex="-1"></a>        <span class="bu">print</span>(<span class="ss">f"Time </span><span class="sc">{</span>t<span class="sc">}</span><span class="ss"> seconds. T1: </span><span class="sc">{</span>lab<span class="sc">.</span>T1<span class="sc">}</span><span class="ss">°C"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>TCLab version 1.0.0
Simulated TCLab
Time 0 seconds. T1: 20.949499999999997°C
Time 2.03 seconds. T1: 20.949499999999997°C
Time 4.0 seconds. T1: 20.949499999999997°C
Time 6.02 seconds. T1: 20.949499999999997°C
Time 8.05 seconds. T1: 20.949499999999997°C
Time 10.06 seconds. T1: 20.949499999999997°C
Time 12.0 seconds. T1: 20.949499999999997°C
Time 14.1 seconds. T1: 20.949499999999997°C
Time 16.1 seconds. T1: 20.949499999999997°C
Time 18.08 seconds. T1: 20.949499999999997°C
Time 20.21 seconds. T1: 20.949499999999997°C
Time 22.15 seconds. T1: 20.949499999999997°C
Time 24.12 seconds. T1: 20.6272°C
Time 26.01 seconds. T1: 20.949499999999997°C
Time 28.21 seconds. T1: 20.6272°C
Time 30.14 seconds. T1: 20.949499999999997°C
Time 32.01 seconds. T1: 20.949499999999997°C
Time 34.01 seconds. T1: 20.949499999999997°C
Time 36.01 seconds. T1: 20.949499999999997°C
Time 38.18 seconds. T1: 20.949499999999997°C
Time 40.0 seconds. T1: 20.949499999999997°C
Time 42.16 seconds. T1: 20.949499999999997°C
Time 44.02 seconds. T1: 20.949499999999997°C
Time 46.12 seconds. T1: 20.949499999999997°C
Time 48.02 seconds. T1: 20.949499999999997°C
Time 50.29 seconds. T1: 20.949499999999997°C
Time 52.19 seconds. T1: 20.949499999999997°C
Time 54.23 seconds. T1: 20.949499999999997°C
Time 56.14 seconds. T1: 20.949499999999997°C
Time 58.29 seconds. T1: 20.949499999999997°C
Time 60.15 seconds. T1: 20.6272°C
Time 62.18 seconds. T1: 20.949499999999997°C
Time 64.25 seconds. T1: 20.949499999999997°C
Time 66.04 seconds. T1: 20.6272°C
Time 68.2 seconds. T1: 20.6272°C
Time 70.18 seconds. T1: 20.949499999999997°C
Time 72.14 seconds. T1: 20.949499999999997°C
Time 74.22 seconds. T1: 20.949499999999997°C
Time 76.04 seconds. T1: 20.949499999999997°C
Time 78.09 seconds. T1: 20.949499999999997°C
Time 80.05 seconds. T1: 20.949499999999997°C
Time 82.11 seconds. T1: 20.949499999999997°C
Time 84.24 seconds. T1: 20.949499999999997°C
Time 86.23 seconds. T1: 20.949499999999997°C
Time 88.16 seconds. T1: 20.949499999999997°C
Time 90.08 seconds. T1: 20.949499999999997°C
Time 92.08 seconds. T1: 20.6272°C
Time 94.29 seconds. T1: 20.949499999999997°C
Time 96.12 seconds. T1: 20.949499999999997°C
Time 98.22 seconds. T1: 20.949499999999997°C
Time 100.12 seconds. T1: 20.949499999999997°C
Time 102.2 seconds. T1: 20.949499999999997°C
Time 104.02 seconds. T1: 20.6272°C
Time 106.15 seconds. T1: 20.949499999999997°C
Time 108.24 seconds. T1: 20.949499999999997°C
Time 110.09 seconds. T1: 20.949499999999997°C
Time 112.01 seconds. T1: 20.949499999999997°C
Time 114.04 seconds. T1: 20.949499999999997°C
Time 116.13 seconds. T1: 20.6272°C
Time 118.25 seconds. T1: 20.949499999999997°C
Time 120.23 seconds. T1: 20.949499999999997°C
Time 122.15 seconds. T1: 20.949499999999997°C
Time 124.17 seconds. T1: 20.949499999999997°C
Time 126.23 seconds. T1: 20.949499999999997°C
Time 128.22 seconds. T1: 20.949499999999997°C
Time 130.09 seconds. T1: 20.6272°C
Time 132.21 seconds. T1: 20.949499999999997°C
Time 134.28 seconds. T1: 20.949499999999997°C
Time 136.17 seconds. T1: 20.949499999999997°C
Time 138.2 seconds. T1: 20.949499999999997°C
Time 140.02 seconds. T1: 20.949499999999997°C
Time 142.2 seconds. T1: 20.949499999999997°C
Time 144.19 seconds. T1: 20.949499999999997°C
Time 146.19 seconds. T1: 20.949499999999997°C
Time 148.02 seconds. T1: 20.949499999999997°C
Time 150.27 seconds. T1: 20.949499999999997°C
Time 152.22 seconds. T1: 20.949499999999997°C
Time 154.16 seconds. T1: 20.949499999999997°C
Time 156.19 seconds. T1: 20.949499999999997°C
Time 158.22 seconds. T1: 20.949499999999997°C
Time 160.27 seconds. T1: 20.949499999999997°C
Time 162.03 seconds. T1: 20.949499999999997°C
Time 164.02 seconds. T1: 20.949499999999997°C
Time 166.09 seconds. T1: 20.949499999999997°C
Time 168.24 seconds. T1: 20.949499999999997°C
Time 170.13 seconds. T1: 20.6272°C
Time 172.06 seconds. T1: 20.949499999999997°C
Time 174.28 seconds. T1: 20.949499999999997°C
Time 176.01 seconds. T1: 20.949499999999997°C
Time 178.19 seconds. T1: 20.6272°C
Time 180.28 seconds. T1: 20.949499999999997°C
Time 182.22 seconds. T1: 20.949499999999997°C
Time 184.0 seconds. T1: 20.949499999999997°C
Time 186.15 seconds. T1: 20.949499999999997°C
Time 188.01 seconds. T1: 20.949499999999997°C
Time 190.23 seconds. T1: 20.949499999999997°C
Time 192.0 seconds. T1: 20.949499999999997°C
Time 194.24 seconds. T1: 20.949499999999997°C
Time 196.06 seconds. T1: 20.949499999999997°C
Time 198.26 seconds. T1: 20.949499999999997°C
Time 200.07 seconds. T1: 20.949499999999997°C
TCLab Model disconnected successfully.</code></pre>
</div>
</div>
<section id="importing" class="level3">
<h3 class="anchored" data-anchor-id="importing">Importing</h3>
<p>Once installed, the <code>tclab</code> package can be imported into Python and an instance created with the Python statements</p>
<pre><code>from tclab import TCLab
lab = TCLab()</code></pre>
<p>TCLab() attempts to find a device connected to a serial port and return a connection. An error is generated if no device is found. The connection should be closed when no longer in use.</p>
<p>The following cell demonstrates this process, and uses the tclab <code>LED()</code> function to flash the LED on the Temperature Control Lab for a period of 10 seconds at a 100% brightness level.</p>
<div id="ab8378d0" class="cell">
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> tclab <span class="im">import</span> TCLab</span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-3"><a href="#cb22-3" aria-hidden="true" tabindex="-1"></a>lab <span class="op">=</span> TCLab()</span>
<span id="cb22-4"><a href="#cb22-4" aria-hidden="true" tabindex="-1"></a>lab.LED(<span class="dv">100</span>)</span>
<span id="cb22-5"><a href="#cb22-5" aria-hidden="true" tabindex="-1"></a>lab.close()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>TCLab version 1.0.0
--- Serial Ports ---
/dev/cu.BLTH n/a n/a
/dev/cu.BlueBeatsStudio n/a n/a
/dev/cu.Bluetooth-Incoming-Port n/a n/a</code></pre>
</div>
<div class="cell-output cell-output-error">
<pre><code>RuntimeError: No Arduino device found.</code></pre>
</div>
</div>
</section>
<section id="using-tclab-with-pythons-with-statement" class="level3">
<h3 class="anchored" data-anchor-id="using-tclab-with-pythons-with-statement">Using TCLab with Python’s <code>with</code> statement</h3>
<p>The Python <code>with</code> statement provides a convenient means of setting up and closing a connection to the Temperature Control Laboratory. In particular, the with statement establishes a context where a tclab instance is created, assigned to a variable, and automatically closed upon completion. The <code>with</code> statement is the preferred way to connect the Temperature Control Laboratory for most uses.</p>
<div id="78acab18" class="cell">
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> tclab <span class="im">import</span> TCLab</span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-3"><a href="#cb25-3" aria-hidden="true" tabindex="-1"></a><span class="cf">with</span> TCLab() <span class="im">as</span> lab:</span>
<span id="cb25-4"><a href="#cb25-4" aria-hidden="true" tabindex="-1"></a>    lab.LED(<span class="dv">100</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
</section>
<section id="reading-temperatures" class="level2">
<h2 class="anchored" data-anchor-id="reading-temperatures">Reading Temperatures</h2>
<p>Once a tclab instance is created and connected to a device, the temperature sensors on the temperature control lab can be acccessed with the attributes <code>.T1</code> and <code>.T2</code>. For example, given an instance <code>lab</code>, the temperatures are accessed as</p>
<pre><code>T1 = lab.T1
T2 = lab.T2</code></pre>
<p><code>lab.T1</code> and <code>lab.T2</code> are read-only properties. Any attempt to set them to a value will return a Python error.</p>
<div id="4704a7bd" class="cell">
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> tclab <span class="im">import</span> TCLab</span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-3"><a href="#cb27-3" aria-hidden="true" tabindex="-1"></a><span class="cf">with</span> TCLab() <span class="im">as</span> a:</span>
<span id="cb27-4"><a href="#cb27-4" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">"Temperature 1: </span><span class="sc">{0:0.2f}</span><span class="st"> C"</span>.<span class="bu">format</span>(a.T1))</span>
<span id="cb27-5"><a href="#cb27-5" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">"Temperature 2: </span><span class="sc">{0:0.2f}</span><span class="st"> C"</span>.<span class="bu">format</span>(a.T2))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="setting-heaters" class="level2">
<h2 class="anchored" data-anchor-id="setting-heaters">Setting Heaters</h2>
<p>For legacy reasons, there are two ways to set the power levels of the heaters.</p>
<p>The first way is to the functions<code>.Q1()</code> and <code>.Q2()</code> of a <code>TCLab</code> instance. For example, both heaters can be set to 100% power with the functions</p>
<pre><code>lab = TCLab()
lab.Q1(100)
lab.Q2(100)</code></pre>
<p>The device firmware limits the heaters to a range of 0 to 100%. The current value of attributes may be accessed via</p>
<pre><code>Q1 = lab.Q1()
Q2 = lab.Q2()</code></pre>
<p>Important notes: 1. The led on the temperature control laboratory will turns from dim to bright when either heater is on. 2. Closing the TCLab instance turns the heaters off. 3. The power level of the two heaters may be different. Current versions of the firmware limit maximum power of first heater to 4 watts, and maxium power of the second heater to 2 watts. 4. In addition to the constraints imposed by the firmware, the power supply may not be capable of providing all of the power needed to operate both heaters at 100% 5. The values retrieved from these functions may be different than the values set due to the power limits enforced by the device firmware.</p>
<div id="ba381d41" class="cell">
<div class="sourceCode cell-code" id="cb30"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> tclab <span class="im">import</span> TCLab</span>
<span id="cb30-2"><a href="#cb30-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> time</span>
<span id="cb30-3"><a href="#cb30-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-4"><a href="#cb30-4" aria-hidden="true" tabindex="-1"></a><span class="cf">with</span> TCLab() <span class="im">as</span> a:</span>
<span id="cb30-5"><a href="#cb30-5" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">"</span><span class="ch">\n</span><span class="st">Starting Temperature 1: </span><span class="sc">{0:0.2f}</span><span class="st"> C"</span>.<span class="bu">format</span>(a.T1),flush<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb30-6"><a href="#cb30-6" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">"Starting Temperature 2: </span><span class="sc">{0:0.2f}</span><span class="st"> C"</span>.<span class="bu">format</span>(a.T2),flush<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb30-7"><a href="#cb30-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-8"><a href="#cb30-8" aria-hidden="true" tabindex="-1"></a>    a.Q1(<span class="dv">100</span>)</span>
<span id="cb30-9"><a href="#cb30-9" aria-hidden="true" tabindex="-1"></a>    a.Q2(<span class="dv">100</span>)</span>
<span id="cb30-10"><a href="#cb30-10" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">"</span><span class="ch">\n</span><span class="st">Set Heater 1:"</span>, a.Q1(), <span class="st">"%"</span>,flush<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb30-11"><a href="#cb30-11" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">"Set Heater 2:"</span>, a.Q2(), <span class="st">"%"</span>,flush<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb30-12"><a href="#cb30-12" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb30-13"><a href="#cb30-13" aria-hidden="true" tabindex="-1"></a>    t_heat <span class="op">=</span> <span class="dv">30</span></span>
<span id="cb30-14"><a href="#cb30-14" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">"</span><span class="ch">\n</span><span class="st">Heat for"</span>, t_heat, <span class="st">"seconds"</span>)</span>
<span id="cb30-15"><a href="#cb30-15" aria-hidden="true" tabindex="-1"></a>    time.sleep(t_heat)</span>
<span id="cb30-16"><a href="#cb30-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-17"><a href="#cb30-17" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">"</span><span class="ch">\n</span><span class="st">Turn Heaters Off"</span>)</span>
<span id="cb30-18"><a href="#cb30-18" aria-hidden="true" tabindex="-1"></a>    a.Q1(<span class="dv">0</span>)</span>
<span id="cb30-19"><a href="#cb30-19" aria-hidden="true" tabindex="-1"></a>    a.Q2(<span class="dv">0</span>)</span>
<span id="cb30-20"><a href="#cb30-20" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">"</span><span class="ch">\n</span><span class="st">Set Heater 1:"</span>, a.Q1(), <span class="st">"%"</span>,flush<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb30-21"><a href="#cb30-21" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">"Set Heater 2:"</span>, a.Q2(), <span class="st">"%"</span>,flush<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb30-22"><a href="#cb30-22" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb30-23"><a href="#cb30-23" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">"</span><span class="ch">\n</span><span class="st">Final Temperature 1: </span><span class="sc">{0:0.2f}</span><span class="st"> C"</span>.<span class="bu">format</span>(a.T1))</span>
<span id="cb30-24"><a href="#cb30-24" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">"Final Temperature 2: </span><span class="sc">{0:0.2f}</span><span class="st"> C"</span>.<span class="bu">format</span>(a.T2))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Alternatively, the heaters can be set using the <code>.U1</code> and <code>.U2</code> attributes of a <code>TCLab</code> instance.</p>
<div id="5a6854a2" class="cell">
<div class="sourceCode cell-code" id="cb31"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a>lab <span class="op">=</span> TCLab()</span>
<span id="cb31-2"><a href="#cb31-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-3"><a href="#cb31-3" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">'Setting power levels on heaters 1 and 2'</span>)</span>
<span id="cb31-4"><a href="#cb31-4" aria-hidden="true" tabindex="-1"></a>lab.U1 <span class="op">=</span> <span class="dv">50</span></span>
<span id="cb31-5"><a href="#cb31-5" aria-hidden="true" tabindex="-1"></a>lab.U2 <span class="op">=</span> <span class="dv">25</span></span>
<span id="cb31-6"><a href="#cb31-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-7"><a href="#cb31-7" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">'Current power level on Heater 1 is: '</span>, lab.U1, <span class="st">'%'</span>)</span>
<span id="cb31-8"><a href="#cb31-8" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">'Current power level on Heater 1 is: '</span>, lab.U2, <span class="st">'%'</span>)</span>
<span id="cb31-9"><a href="#cb31-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-10"><a href="#cb31-10" aria-hidden="true" tabindex="-1"></a>lab.close()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="synchronizing-with-real-time-using-clock" class="level2">
<h2 class="anchored" data-anchor-id="synchronizing-with-real-time-using-clock">Synchronizing with Real Time using <code>clock</code></h2>
<p>The <code>tclab</code> module includes <code>clock</code> for synchronizing calculations with real time. <code>clock(tperiod, tstep)</code> generates a sequence of iterations over a period of <code>tperiod</code> seconds evenly by <code>tstep</code> seconds. If <code>tstep</code> is omitted then the default period is set to 1 second.</p>
<div id="f499fc5b" class="cell">
<div class="sourceCode cell-code" id="cb32"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> tclab <span class="im">import</span> clock</span>
<span id="cb32-2"><a href="#cb32-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-3"><a href="#cb32-3" aria-hidden="true" tabindex="-1"></a>tperiod <span class="op">=</span> <span class="dv">6</span></span>
<span id="cb32-4"><a href="#cb32-4" aria-hidden="true" tabindex="-1"></a>tstep <span class="op">=</span> <span class="dv">2</span></span>
<span id="cb32-5"><a href="#cb32-5" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> t <span class="kw">in</span> clock(tperiod,tstep):</span>
<span id="cb32-6"><a href="#cb32-6" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(t, <span class="st">"sec."</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>There are some considerations to keep in mind when using <code>clock</code>. Most important, by its nature Python is not a real-time environment. <code>clock</code> makes a best effort to stay in sync with evenly spaced ticks of the real time clock. If, for some reason, the loop falls behind the real time clock, then the generator will skip over the event to get back in sync with the real time clock. Thus the total number of iterations may be less than expected. This behavior is demonstrated in the following cell.</p>
<div id="4450f3dd" class="cell">
<div class="sourceCode cell-code" id="cb33"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> tclab <span class="im">import</span> TCLab, clock</span>
<span id="cb33-2"><a href="#cb33-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-3"><a href="#cb33-3" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> time</span>
<span id="cb33-4"><a href="#cb33-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-5"><a href="#cb33-5" aria-hidden="true" tabindex="-1"></a>tfinal <span class="op">=</span> <span class="dv">12</span></span>
<span id="cb33-6"><a href="#cb33-6" aria-hidden="true" tabindex="-1"></a>tstep <span class="op">=</span> <span class="dv">2</span></span>
<span id="cb33-7"><a href="#cb33-7" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> t <span class="kw">in</span> clock(tfinal, tstep):</span>
<span id="cb33-8"><a href="#cb33-8" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(t, <span class="st">"sec."</span>)</span>
<span id="cb33-9"><a href="#cb33-9" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb33-10"><a href="#cb33-10" aria-hidden="true" tabindex="-1"></a>    <span class="co"># insert a long time out between 3 and 5 seconds into the event loop</span></span>
<span id="cb33-11"><a href="#cb33-11" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (t <span class="op">&gt;</span> <span class="dv">3</span>) <span class="kw">and</span> (t <span class="op">&lt;</span> <span class="dv">5</span>):</span>
<span id="cb33-12"><a href="#cb33-12" aria-hidden="true" tabindex="-1"></a>        time.sleep(<span class="fl">2.2</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<section id="using-clock-with-tclab" class="level3">
<h3 class="anchored" data-anchor-id="using-clock-with-tclab">Using <code>clock</code> with TCLab</h3>
<div id="ef717b1d" class="cell">
<div class="sourceCode cell-code" id="cb34"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> tclab <span class="im">import</span> TCLab, clock</span>
<span id="cb34-2"><a href="#cb34-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb34-3"><a href="#cb34-3" aria-hidden="true" tabindex="-1"></a>tperiod <span class="op">=</span> <span class="dv">20</span></span>
<span id="cb34-4"><a href="#cb34-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb34-5"><a href="#cb34-5" aria-hidden="true" tabindex="-1"></a><span class="co"># connect to the temperature control lab</span></span>
<span id="cb34-6"><a href="#cb34-6" aria-hidden="true" tabindex="-1"></a><span class="cf">with</span> TCLab() <span class="im">as</span> a:</span>
<span id="cb34-7"><a href="#cb34-7" aria-hidden="true" tabindex="-1"></a>    <span class="co"># turn heaters on</span></span>
<span id="cb34-8"><a href="#cb34-8" aria-hidden="true" tabindex="-1"></a>    a.Q1(<span class="dv">100</span>)</span>
<span id="cb34-9"><a href="#cb34-9" aria-hidden="true" tabindex="-1"></a>    a.Q2(<span class="dv">100</span>)</span>
<span id="cb34-10"><a href="#cb34-10" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">"</span><span class="ch">\n</span><span class="st">Set Heater 1 to </span><span class="sc">{0:f}</span><span class="st"> %"</span>.<span class="bu">format</span>(a.Q1()))</span>
<span id="cb34-11"><a href="#cb34-11" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">"Set Heater 2 to </span><span class="sc">{0:f}</span><span class="st"> %"</span>.<span class="bu">format</span>(a.Q2()))</span>
<span id="cb34-12"><a href="#cb34-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb34-13"><a href="#cb34-13" aria-hidden="true" tabindex="-1"></a>    <span class="co"># report temperatures for the next tperiod seconds</span></span>
<span id="cb34-14"><a href="#cb34-14" aria-hidden="true" tabindex="-1"></a>    sfmt <span class="op">=</span> <span class="st">"   </span><span class="sc">{0:5.1f}</span><span class="st"> sec:   T1 = </span><span class="sc">{1:0.1f}</span><span class="st"> C    T2 = </span><span class="sc">{2:0.1f}</span><span class="st"> C"</span></span>
<span id="cb34-15"><a href="#cb34-15" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> t <span class="kw">in</span> clock(tperiod):</span>
<span id="cb34-16"><a href="#cb34-16" aria-hidden="true" tabindex="-1"></a>        <span class="bu">print</span>(sfmt.<span class="bu">format</span>(t, a.T1, a.T2), flush<span class="op">=</span><span class="va">True</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
</section>
<section id="the-tclab-historian" class="level2">
<h2 class="anchored" data-anchor-id="the-tclab-historian">The TCLab <code>Historian</code></h2>
<p>The <code>Historian</code> class provides means for data logging. Given an instance <code>lab</code> of a TCLab object, <code>lab.sources</code> is a list of all data sources and methods to access the data.</p>
<pre><code>lab = TCLab()
h = Historian(lab.sources)</code></pre>
<p>The historian initializes a data log. The data log is updated by issuing a command</p>
<pre><code>h.update(t)</code></pre>
<p>where <code>t</code> marks the current time. The following cell logs 10 seconds of data with a chaning power level to heater 1, then saves the data to a file.</p>
<div id="4e639474" class="cell">
<div class="sourceCode cell-code" id="cb37"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a>temperature <span class="op">=</span> []</span>
<span id="cb37-2"><a href="#cb37-2" aria-hidden="true" tabindex="-1"></a>time <span class="op">=</span> []</span>
<span id="cb37-3"><a href="#cb37-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-4"><a href="#cb37-4" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> t <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">10</span>):</span>
<span id="cb37-5"><a href="#cb37-5" aria-hidden="true" tabindex="-1"></a>    temperature.append(lab.T1)</span>
<span id="cb37-6"><a href="#cb37-6" aria-hidden="true" tabindex="-1"></a>    time.append(t)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="ac4a8931" class="cell">
<div class="sourceCode cell-code" id="cb38"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a>time, temperature</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<pre><code>([0, 1, 2, 3, 4, 5, 6, 7, 8, 9],
 [20.949499999999997,
  20.949499999999997,
  20.949499999999997,
  20.949499999999997,
  20.949499999999997,
  20.949499999999997,
  20.949499999999997,
  20.6272,
  20.949499999999997,
  20.949499999999997])</code></pre>
</div>
</div>
<div id="164da46c" class="cell">
<div class="sourceCode cell-code" id="cb40"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> tclab <span class="im">import</span> TCLabModel, clock, Historian</span>
<span id="cb40-2"><a href="#cb40-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb40-3"><a href="#cb40-3" aria-hidden="true" tabindex="-1"></a><span class="cf">with</span> TCLab() <span class="im">as</span> lab:</span>
<span id="cb40-4"><a href="#cb40-4" aria-hidden="true" tabindex="-1"></a>    h <span class="op">=</span> Historian(lab.sources)</span>
<span id="cb40-5"><a href="#cb40-5" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> t <span class="kw">in</span> clock(<span class="dv">10</span>):</span>
<span id="cb40-6"><a href="#cb40-6" aria-hidden="true" tabindex="-1"></a>        lab.Q1(<span class="dv">100</span> <span class="cf">if</span> t <span class="op">&lt;=</span> <span class="dv">5</span> <span class="cf">else</span> <span class="dv">0</span>)</span>
<span id="cb40-7"><a href="#cb40-7" aria-hidden="true" tabindex="-1"></a>        h.update(t)</span>
<span id="cb40-8"><a href="#cb40-8" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb40-9"><a href="#cb40-9" aria-hidden="true" tabindex="-1"></a>h.to_csv(<span class="st">'data.csv'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>TCLab version 1.0.0
Simulated TCLab
TCLab Model disconnected successfully.</code></pre>
</div>
</div>
<p>Once saved, data can be read and plotted using the <a href="https://pandas.pydata.org/">Pandas Data Analysis Library</a> as demonstrated in this cell.</p>
<div id="90bb415f" class="cell">
<div class="sourceCode cell-code" id="cb42"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb42-2"><a href="#cb42-2" aria-hidden="true" tabindex="-1"></a>data <span class="op">=</span> pd.read_csv(<span class="st">'data.csv'</span>)</span>
<span id="cb42-3"><a href="#cb42-3" aria-hidden="true" tabindex="-1"></a>data.index <span class="op">=</span> data[<span class="st">'Time'</span>]</span>
<span id="cb42-4"><a href="#cb42-4" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(data)</span>
<span id="cb42-5"><a href="#cb42-5" aria-hidden="true" tabindex="-1"></a>data[[<span class="st">'Q1'</span>,<span class="st">'Q2'</span>]].plot(grid<span class="op">=</span><span class="va">True</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>        Time       T1       T2   Q1  Q2
Time                                   
0.00    0.00  20.9495  20.9495  100   0
1.11    1.11  20.9495  20.9495  100   0
2.08    2.08  20.9495  20.9495  100   0
3.08    3.08  20.9495  20.9495  100   0
4.06    4.06  20.9495  20.9495  100   0
5.19    5.19  21.2718  20.9495    0   0
6.17    6.17  21.2718  20.9495    0   0
7.18    7.18  21.2718  20.9495    0   0
8.18    8.18  21.2718  20.9495    0   0
9.08    9.08  21.5941  20.9495    0   0
10.21  10.21  21.5941  20.9495    0   0</code></pre>
</div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="01_Understanding_TCLab_files/figure-html/cell-20-output-2.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="the-tclab-plotter" class="level2">
<h2 class="anchored" data-anchor-id="the-tclab-plotter">The TCLab <code>Plotter</code></h2>
<p>The <code>Plotter</code> class adds a real time plotting of experimental data. A plotter is created from an instance of an historian as follows</p>
<pre><code>h = Historian(lab.sources)
p = Plotter(h)</code></pre>
<p>Updating the plotter also updates the associated historian.</p>
<pre><code>p.update(t)</code></pre>
<p>The following example shows how this works.</p>
<div id="652b1ce5" class="cell">
<div class="sourceCode cell-code" id="cb46"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb46-1"><a href="#cb46-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> tclab <span class="im">import</span> TCLab, clock, Historian, Plotter</span>
<span id="cb46-2"><a href="#cb46-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-3"><a href="#cb46-3" aria-hidden="true" tabindex="-1"></a><span class="cf">with</span> TCLab() <span class="im">as</span> lab:</span>
<span id="cb46-4"><a href="#cb46-4" aria-hidden="true" tabindex="-1"></a>    h <span class="op">=</span> Historian(lab.sources)</span>
<span id="cb46-5"><a href="#cb46-5" aria-hidden="true" tabindex="-1"></a>    p <span class="op">=</span> Plotter(h, <span class="dv">10</span>)</span>
<span id="cb46-6"><a href="#cb46-6" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> t <span class="kw">in</span> clock(<span class="dv">10</span>):</span>
<span id="cb46-7"><a href="#cb46-7" aria-hidden="true" tabindex="-1"></a>        lab.Q1(<span class="dv">100</span> <span class="cf">if</span> t <span class="op">&lt;=</span> <span class="dv">5</span> <span class="cf">else</span> <span class="dv">0</span>)</span>
<span id="cb46-8"><a href="#cb46-8" aria-hidden="true" tabindex="-1"></a>        p.update(t)</span>
<span id="cb46-9"><a href="#cb46-9" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb46-10"><a href="#cb46-10" aria-hidden="true" tabindex="-1"></a>h.to_csv(<span class="st">'data.csv'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="using-tclab-offline" class="level2">
<h2 class="anchored" data-anchor-id="using-tclab-offline">Using TCLab Offline</h2>
<div id="9aa7b74d" class="cell">
<div class="sourceCode cell-code" id="cb47"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb47-1"><a href="#cb47-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> tclab <span class="im">import</span> clock, setup, Historian, Plotter</span>
<span id="cb47-2"><a href="#cb47-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-3"><a href="#cb47-3" aria-hidden="true" tabindex="-1"></a>TCLab <span class="op">=</span> setup(connected<span class="op">=</span><span class="va">False</span>, speedup<span class="op">=</span><span class="dv">20</span>)</span>
<span id="cb47-4"><a href="#cb47-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-5"><a href="#cb47-5" aria-hidden="true" tabindex="-1"></a>SP <span class="op">=</span> <span class="dv">40</span></span>
<span id="cb47-6"><a href="#cb47-6" aria-hidden="true" tabindex="-1"></a><span class="cf">with</span> TCLab() <span class="im">as</span> a:</span>
<span id="cb47-7"><a href="#cb47-7" aria-hidden="true" tabindex="-1"></a>    h <span class="op">=</span> Historian(a.sources)</span>
<span id="cb47-8"><a href="#cb47-8" aria-hidden="true" tabindex="-1"></a>    p <span class="op">=</span> Plotter(h)</span>
<span id="cb47-9"><a href="#cb47-9" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> t <span class="kw">in</span> clock(<span class="dv">120</span>,<span class="dv">2</span>):</span>
<span id="cb47-10"><a href="#cb47-10" aria-hidden="true" tabindex="-1"></a>        PV <span class="op">=</span> a.T1</span>
<span id="cb47-11"><a href="#cb47-11" aria-hidden="true" tabindex="-1"></a>        MV <span class="op">=</span> <span class="dv">100</span> <span class="cf">if</span> SP <span class="op">&gt;</span> PV <span class="cf">else</span> <span class="dv">0</span></span>
<span id="cb47-12"><a href="#cb47-12" aria-hidden="true" tabindex="-1"></a>        a.U1 <span class="op">=</span> MV</span>
<span id="cb47-13"><a href="#cb47-13" aria-hidden="true" tabindex="-1"></a>        p.update()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="01_Understanding_TCLab_files/figure-html/cell-22-output-1.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>TCLab Model disconnected successfully.</code></pre>
</div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="01_Understanding_TCLab_files/figure-html/cell-22-output-3.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="running-diagnostics" class="level2">
<h2 class="anchored" data-anchor-id="running-diagnostics">Running Diagnostics</h2>
<div id="27c27ff0" class="cell">
<div class="sourceCode cell-code" id="cb49"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb49-1"><a href="#cb49-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> tclab</span>
<span id="cb49-2"><a href="#cb49-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb49-3"><a href="#cb49-3" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"Version = "</span>, tclab.__version__)</span>
<span id="cb49-4"><a href="#cb49-4" aria-hidden="true" tabindex="-1"></a>tclab.diagnose()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Version =  1.0.0

Checking connection
-------------------
Looking for Arduino on any port...
--- Serial Ports ---
/dev/cu.BLTH n/a n/a
/dev/cu.BlueBeatsStudio n/a n/a
/dev/cu.Bluetooth-Incoming-Port n/a n/a
No known Arduino was found in the ports listed above.</code></pre>
</div>
</div>


</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp("https:\/\/andreamunafo\.github\.io\/principles-of-automatic-controls");
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




<footer class="footer"><div class="nav-footer"><div class="nav-footer-center"><div class="toc-actions d-sm-block d-md-none"><ul><li><a href="https://github.com/andreamunafo/principles-of-automatic-controls/issues/new" class="toc-action"><i class="bi bi-github"></i>Report an issue</a></li></ul></div></div></div></footer></body></html>