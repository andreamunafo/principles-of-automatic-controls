<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.4.552">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>principles-of-automatic-controls - Models of Controlled Devices</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>

  <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<script type="text/javascript">
const typesetMath = (el) => {
  if (window.MathJax) {
    // MathJax Typeset
    window.MathJax.typeset([el]);
  } else if (window.katex) {
    // KaTeX Render
    var mathElements = el.getElementsByClassName("math");
    var macros = [];
    for (var i = 0; i < mathElements.length; i++) {
      var texText = mathElements[i].firstChild;
      if (mathElements[i].tagName == "SPAN") {
        window.katex.render(texText.data, mathElements[i], {
          displayMode: mathElements[i].classList.contains('display'),
          throwOnError: false,
          macros: macros,
          fleqn: false
        });
      }
    }
  }
}
window.Quarto = {
  typesetMath
};
</script>

<link rel="stylesheet" href="styles.css">
<meta property="og:title" content="principles-of-automatic-controls - Models of Controlled Devices">
<meta property="og:description" content="Course in feedback control for the University of Pisa">
<meta property="og:site_name" content="principles-of-automatic-controls">
<meta name="twitter:title" content="principles-of-automatic-controls - Models of Controlled Devices">
<meta name="twitter:description" content="Course in feedback control for the University of Pisa">
<meta name="twitter:card" content="summary">
</head>

<body class="nav-sidebar floating nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="./index.html">
    <span class="navbar-title">principles-of-automatic-controls</span>
    </a>
  </div>
        <div class="quarto-navbar-tools tools-end">
</div>
          <div id="quarto-search" class="" title="Search"></div>
      </div> <!-- /container-fluid -->
    </nav>
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./models_of_control_devices_and_systems.html">Models of Controlled Devices</a></li></ol></nav>
        <a class="flex-grow-1" role="button" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto">
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Feedback Control</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./faq.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Frequently Asked Questions (FAQ)</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./syllabus.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Syllabus for “Principles of Automatic Control”</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./toc.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Table of Contents</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./update_and_manage_local_changes_guide.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">A Guide to Updating Your Local Repository with Git in Anaconda’s Virtual Environment</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./getting_started_with_python_and_jupyter_notebook.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Getting Started with Python and Jupyter Notebooks</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./intro.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Principles of Automatic Control</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./basics_of_feedback_control.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Introduction to Feedback Control Systems</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./introduction_to_control_problem.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Introduction to the control problem</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./dynamic_systems.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Modeling in Control Systems</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./dynamic_response.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Dynamic response of control systems</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./06_inverse_laplace_transform.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Inverse Laplace Transform: Partial fraction decomposition</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./modeling_dynamic_systems.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Introduction to Modeling of Dynamic Systems</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./control_system_components.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Control System Components</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./models_of_control_devices_and_systems.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text">Models of Controlled Devices</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./hardware_and_case_studies.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Hardware of Control Systems and Case Studies</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./ac_hardware_and_case_studies.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">AC Motion Control Systems</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./a_first_complete_application.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">A Feedback Control System</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./principles_of_feedback_control.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Principles of Feedback Control</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./feedback_systems_and_their_effects.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Feedback systems and their effects</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./introduction_to_control_systems.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Introduction to Control Systems</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./stability.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Stability Analysis in Control Systems</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./stability_and_routh_criterion.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Stability Analysis in Control Systems</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./performance_of_feedback_systems.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Performance of Feedback Systems</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./design_of_feedback_control.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Design Cycle for a Standard Second-Order System</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./20_Design_of_feedback_control_continued.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Understanding the Standard Second-Order System: Recap</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./steady_state_accuracy_and_design_principles.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Steady State Accuracy and Design Principles</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./compensator_design_using_root_locus.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Compensator Design</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./design_with_the_root_locus.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Design with the Root Locus</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./compensators_and_root_locus.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Compensators and the Root Locus</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./introduction_to_frequency_domain_analysis_in_control_systems.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Introduction to Frequency Domain Analysis in Control Systems</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./application_of_nyquist_stability_criterion.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Application of Nyquist Stability Criterion in Control Systems</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./the_nyquist_stability_criterion_and_relative_stability.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">The Nyquist Stability Criterion and Relative Stability</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./bode_plots.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Bode Plot Analysis</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./feedback_system_performance_based_on_frequency_response.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Feedback System Performance Based On Frequency Response</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./compensator_design_using_frequency_response_plots.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Principles of Automatic Control: Lead and Lag Compensation</span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true">
 <span class="menu-text">IT_TCLab_🇮🇹</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./IT_TCLab_🇮🇹/spacecraft_thermal_control_systems_it.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Il Laboratorio di Controllo della Temperatura</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./IT_TCLab_🇮🇹/tclab_exercises_report_template_it.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Modello di report sugli esercizi TCLab</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./IT_TCLab_🇮🇹/tclab_it.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Il Laboratorio di Controllo della Temperatura</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./IT_TCLab_🇮🇹/understanding_tclab_it.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Comprendere TCLab</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./IT_TCLab_🇮🇹/tclab_lab_1_coding_a_relay_controller_it.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">TCLab Lab 1: Codifica di un controller relè</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./IT_TCLab_🇮🇹/system_model_and_identification_tclab_it.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Modellazione del sistema</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./IT_TCLab_🇮🇹/step_testing_tclab_it.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Passo Test</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./IT_TCLab_🇮🇹/fitting_step_test_data_to_empirical_models_it.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Adattamento dei dati dei test di fase ai modelli empirici</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./IT_TCLab_🇮🇹/tclab_lab_2_model_identification_it.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">TCLab Lab 2: Identificazione del modello</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./IT_TCLab_🇮🇹/tclab_lab_2_fitting_it.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Identificazione del modello: adattamento dei modelli ai dati</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./IT_TCLab_🇮🇹/relay_control_it.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Controllo relè</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./IT_TCLab_🇮🇹/pid_control_it.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Controllo PID</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./IT_TCLab_🇮🇹/lab-assignment-pid-control_it.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Compito di laboratorio: Controllo PID</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./IT_TCLab_🇮🇹/lab-assignment-pi-control_it.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Compito di laboratorio 4: Controllo PI</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="true">
 <span class="menu-text">IT_🇮🇹</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./IT_🇮🇹/faq_it.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Domande frequenti (FAQ)</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./IT_🇮🇹/syllabus_it.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Programma del corso “Principi del controllo automatico”</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./IT_🇮🇹/update_and_manage_local_changes_guide_it.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Aggiornare il Proprio Repository Locale Mantenendo le Modifiche Locali</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./IT_🇮🇹/getting_started_with_python_and_jupyter_notebook_it.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Guida introduttiva ai notebook Python e Jupyter</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./IT_🇮🇹/intro_it.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Principi di controllo automatico</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./IT_🇮🇹/basics_of_feedback_control_it.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Introduzione ai sistemi di controllo del feedback</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./IT_🇮🇹/introduction_to_control_problem_it.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Introduzione al problema del controllo</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./IT_🇮🇹/dynamic_systems_it.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Modellazione nei sistemi di controllo</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./IT_🇮🇹/dynamic_response_it.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Risposta dinamica dei sistemi di controllo</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./IT_🇮🇹/06_inverse_laplace_transform_it.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Trasformata di Laplace inversa: scomposizione parziale di frazioni</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./IT_🇮🇹/modeling_dynamic_systems_it.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Introduzione alla modellazione dei sistemi dinamici</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./IT_🇮🇹/control_system_components_it.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Componenti del sistema di controllo</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./IT_🇮🇹/models_of_control_devices_and_systems_it.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Modelli di dispositivi controllati</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./IT_🇮🇹/hardware_and_case_studies_it.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Hardware dei sistemi di controllo e casi di studio</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./IT_🇮🇹/ac_hardware_and_case_studies_it.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Sistemi di controllo del movimento CA</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./IT_🇮🇹/a_first_complete_application_it.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Un sistema di controllo del feedback</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./IT_🇮🇹/principles_of_feedback_control_it.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Principi di controllo del feedback</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./IT_🇮🇹/feedback_systems_and_their_effects_it.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Sistemi di feedback e loro effetti</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./IT_🇮🇹/introduction_to_control_systems_it.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Introduzione ai sistemi di controllo</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./IT_🇮🇹/stability_it.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Analisi di stabilità nei sistemi di controllo</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./IT_🇮🇹/stability_and_routh_criterion_it.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Analisi di stabilità nei sistemi di controllo</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./IT_🇮🇹/performance_of_feedback_systems_it.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Prestazioni dei sistemi di feedback</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./IT_🇮🇹/design_of_feedback_control_it.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Ciclo di progettazione per un sistema standard del secondo ordine</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./IT_🇮🇹/20_Design_of_feedback_control_continued_it.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Comprensione del sistema standard del secondo ordine: riepilogo</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./IT_🇮🇹/steady_state_accuracy_and_design_principles_it.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Precisione dello stato stazionario e principi di progettazione</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./IT_🇮🇹/compensator_design_using_root_locus_it.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Progettazione del compensatore</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./IT_🇮🇹/design_with_the_root_locus_it.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Progettare con il luogo delle radici</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./IT_🇮🇹/compensators_and_root_locus_it.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Compensatori e luogo delle radici</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./IT_🇮🇹/introduction_to_frequency_domain_analysis_in_control_systems_it.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Introduzione all’analisi nel dominio della frequenza nei sistemi di controllo</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./IT_🇮🇹/application_of_nyquist_stability_criterion_it.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Applicazione del criterio di stabilità di Nyquist nei sistemi di controllo</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./IT_🇮🇹/the_nyquist_stability_criterion_and_relative_stability_it.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Il criterio di stabilità di Nyquist e la stabilità relativa</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./IT_🇮🇹/bode_plots_it.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Analisi del diagramma di Bode</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./IT_🇮🇹/feedback_system_performance_based_on_frequency_response_it.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Prestazioni del sistema di feedback basate sulla risposta in frequenza</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./IT_🇮🇹/index_it.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Syllabus - Fondamenti di Automatica</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" aria-expanded="true">
 <span class="menu-text">TCLab</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-3" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./TCLab/spacecraft_thermal_control_systems.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">The Temperature Control Laboratory</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./TCLab/tclab_exercises_report_template.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">TCLab Exercises Report Template</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./TCLab/tclab.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">The Temperature Control Lab</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./TCLab/understanding_tclab.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Understanding TCLab</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./TCLab/tclab_lab_1_coding_a_relay_controller-solution.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">TCLab Lab 1: Coding a relay controller</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./TCLab/tclab_lab_1_coding_a_relay_controller.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">TCLab Lab 1: Coding a relay controller</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./TCLab/system_model_and_identification_tclab.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">System Modeling</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./TCLab/step_testing_tclab.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Step Testing</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./TCLab/fitting_step_test_data_to_empirical_models.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Fitting Step Test Data to Empirical Models</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./TCLab/tclab_lab_2_model_identification.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">TCLab Lab 2: Model Identification</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./TCLab/tclab_lab_2_model_identification_solutions.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">TCLab Lab 2: Model Identification</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./TCLab/tclab_lab_2_fitting.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Model Identification: Fitting models to data</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./TCLab/relay_control.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Relay Control</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./TCLab/pid_control.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">PID Control</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./TCLab/lab-assignment-pid-control.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Lab Assignment: PID Control</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./TCLab/lab-assignment-pi-control.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Lab Assignment 4: PI Control</span></a>
  </div>
</li>
      </ul>
  </li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#revisiting-plant-models" id="toc-revisiting-plant-models" class="nav-link active" data-scroll-target="#revisiting-plant-models">Revisiting Plant Models</a></li>
  <li><a href="#cascade-of-blocks" id="toc-cascade-of-blocks" class="nav-link" data-scroll-target="#cascade-of-blocks">Cascade of Blocks</a></li>
  <li><a href="#summing-junctions-take-off-points" id="toc-summing-junctions-take-off-points" class="nav-link" data-scroll-target="#summing-junctions-take-off-points">Summing Junctions &amp; Take-off Points</a>
  <ul class="collapse">
  <li><a href="#liquid-level-system-a-detailed-look" id="toc-liquid-level-system-a-detailed-look" class="nav-link" data-scroll-target="#liquid-level-system-a-detailed-look">Liquid Level System: A Detailed Look</a></li>
  <li><a href="#sidebar---modeling-a-single-tank" id="toc-sidebar---modeling-a-single-tank" class="nav-link" data-scroll-target="#sidebar---modeling-a-single-tank">Sidebar - Modeling a Single Tank</a></li>
  </ul></li>
  <li><a href="#block-diagram-fundamentals" id="toc-block-diagram-fundamentals" class="nav-link" data-scroll-target="#block-diagram-fundamentals">Block Diagram Fundamentals</a></li>
  <li><a href="#an-overview-of-the-feedback-control-system" id="toc-an-overview-of-the-feedback-control-system" class="nav-link" data-scroll-target="#an-overview-of-the-feedback-control-system">An Overview of the Feedback Control System</a>
  <ul class="collapse">
  <li><a href="#comments" id="toc-comments" class="nav-link" data-scroll-target="#comments">Comments</a></li>
  <li><a href="#standard-block-diagram-for-feedback-design" id="toc-standard-block-diagram-for-feedback-design" class="nav-link" data-scroll-target="#standard-block-diagram-for-feedback-design">Standard Block Diagram for Feedback Design</a></li>
  <li><a href="#a-convenient-block-diagram" id="toc-a-convenient-block-diagram" class="nav-link" data-scroll-target="#a-convenient-block-diagram">A Convenient Block Diagram</a></li>
  <li><a href="#unity-feedback-system" id="toc-unity-feedback-system" class="nav-link" data-scroll-target="#unity-feedback-system">Unity Feedback System</a></li>
  </ul></li>
  <li><a href="#the-design-feedback-block-diagram" id="toc-the-design-feedback-block-diagram" class="nav-link" data-scroll-target="#the-design-feedback-block-diagram">The Design Feedback Block Diagram</a>
  <ul class="collapse">
  <li><a href="#disturbances-matter" id="toc-disturbances-matter" class="nav-link" data-scroll-target="#disturbances-matter">Disturbances Matter</a></li>
  </ul></li>
  <li><a href="#closed-loop-transfer-function" id="toc-closed-loop-transfer-function" class="nav-link" data-scroll-target="#closed-loop-transfer-function">Closed-loop transfer function</a>
  <ul class="collapse">
  <li><a href="#setting-disturbance-to-zero" id="toc-setting-disturbance-to-zero" class="nav-link" data-scroll-target="#setting-disturbance-to-zero">Setting Disturbance to Zero</a></li>
  <li><a href="#setting-the-reference-input-to-zero" id="toc-setting-the-reference-input-to-zero" class="nav-link" data-scroll-target="#setting-the-reference-input-to-zero">Setting the Reference Input to Zero</a></li>
  <li><a href="#the-loop-transfer-function" id="toc-the-loop-transfer-function" class="nav-link" data-scroll-target="#the-loop-transfer-function">The loop transfer function</a></li>
  </ul></li>
  <li><a href="#concluding-remarks-on-transfer-functions-diagrams" id="toc-concluding-remarks-on-transfer-functions-diagrams" class="nav-link" data-scroll-target="#concluding-remarks-on-transfer-functions-diagrams">Concluding Remarks on Transfer Functions Diagrams</a></li>
  <li><a href="#advanced-block-diagram-reduction" id="toc-advanced-block-diagram-reduction" class="nav-link" data-scroll-target="#advanced-block-diagram-reduction">Advanced Block Diagram Reduction</a>
  <ul class="collapse">
  <li><a href="#dissecting-a-multi-loop-system" id="toc-dissecting-a-multi-loop-system" class="nav-link" data-scroll-target="#dissecting-a-multi-loop-system">Dissecting a Multi-loop System</a>
  <ul class="collapse">
  <li><a href="#solution" id="toc-solution" class="nav-link" data-scroll-target="#solution">Solution</a></li>
  <li><a href="#alternative-solution" id="toc-alternative-solution" class="nav-link" data-scroll-target="#alternative-solution">Alternative solution</a></li>
  </ul></li>
  <li><a href="#rules-for-block-diagram-manipulation" id="toc-rules-for-block-diagram-manipulation" class="nav-link" data-scroll-target="#rules-for-block-diagram-manipulation">Rules for Block Diagram Manipulation</a></li>
  </ul></li>
  <li><a href="#signal-flow-graphs-and-the-masons-gain-formula" id="toc-signal-flow-graphs-and-the-masons-gain-formula" class="nav-link" data-scroll-target="#signal-flow-graphs-and-the-masons-gain-formula">Signal Flow Graphs and the Mason’s Gain Formula</a>
  <ul class="collapse">
  <li><a href="#from-block-diagrams-to-signal-flow-graphs" id="toc-from-block-diagrams-to-signal-flow-graphs" class="nav-link" data-scroll-target="#from-block-diagrams-to-signal-flow-graphs">From Block Diagrams to Signal Flow Graphs</a>
  <ul class="collapse">
  <li><a href="#understanding-nodes-and-paths-in-sfgs" id="toc-understanding-nodes-and-paths-in-sfgs" class="nav-link" data-scroll-target="#understanding-nodes-and-paths-in-sfgs">Understanding Nodes and Paths in SFGs</a></li>
  <li><a href="#constructing-the-signal-flow-graph" id="toc-constructing-the-signal-flow-graph" class="nav-link" data-scroll-target="#constructing-the-signal-flow-graph">Constructing the Signal Flow Graph</a></li>
  </ul></li>
  <li><a href="#a-more-complex-example" id="toc-a-more-complex-example" class="nav-link" data-scroll-target="#a-more-complex-example">A more complex example</a></li>
  </ul></li>
  <li><a href="#introducing-masons-gain-formula" id="toc-introducing-masons-gain-formula" class="nav-link" data-scroll-target="#introducing-masons-gain-formula">Introducing Mason’s Gain Formula</a>
  <ul class="collapse">
  <li><a href="#example" id="toc-example" class="nav-link" data-scroll-target="#example">Example</a></li>
  <li><a href="#what-is-the-self-loop" id="toc-what-is-the-self-loop" class="nav-link" data-scroll-target="#what-is-the-self-loop">What is the self loop?</a></li>
  </ul></li>
  </ul>
<div class="toc-actions"><ul><li><a href="https://github.com/andreamunafo/principles-of-automatic-controls/issues/new" class="toc-action"><i class="bi bi-github"></i>Report an issue</a></li></ul></div></nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Models of Controlled Devices</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<!-- WARNING: THIS FILE WAS AUTOGENERATED! DO NOT EDIT! -->
<p>Having been introduced to various plant models we frequently encounter in various applications, we are now well-poised to delve into the complete feedback control system. Consequently, our focus with this notebook is on models of controlled devices, as well as the complete systems we’ll build using these devices.</p>
<section id="revisiting-plant-models" class="level2">
<h2 class="anchored" data-anchor-id="revisiting-plant-models">Revisiting Plant Models</h2>
<p>In order to ensure that we have a clear foundation, let’s review the scenario with respect to the plant models that we have modeled through transfer functions and block diagrams.</p>
<table>
<tbody><tr>
<td>
<img src="./pics/09_Models_of_Control_Devices_and_Systems_transfer_function_block_diagram.png" alt="09_Models_of_Control_Devices_and_Systems_transfer_function_block_diagram" style="width: 350px;">
</td></tr>
</tbody></table>
<p>This diagram encapsulates the plant’s dynamics through a transfer function, <span class="math inline">\(G(s)\)</span>. The input to the plant, denoted as <span class="math inline">\(R(s)\)</span>, produces an output, <span class="math inline">\(Y(s)\)</span>. This output, also named as the controlled variable of the system, will always be the result of multiplying the transfer function <span class="math inline">\(G(s)\)</span> with the input <span class="math inline">\(R(s)\)</span>.</p>
<p><span class="math display">\[
Y(s) = G(s)R(s)
\]</span></p>
<p>This equation provides a mathematical representation in the transform domain for the plant, which serves as a subsystem in the overarching control system we’ll soon explore.</p>
<p><strong>Pop-up Question:</strong> In the equation <span class="math inline">\(Y(s) = G(s)R(s)\)</span>, where <span class="math inline">\(Y(s) =\frac{1}{s+1}\)</span> and <span class="math inline">\(R(s)=1\)</span>, , what would <span class="math inline">\(Y(s)\)</span> be? <strong>Answer</strong>: <span class="math inline">\(\frac{1}{s+1}\)</span></p>
</section>
<section id="cascade-of-blocks" class="level2">
<h2 class="anchored" data-anchor-id="cascade-of-blocks">Cascade of Blocks</h2>
<p>Let’s now assume we now have two blocks, <span class="math inline">\(G_1(s)\)</span> and <span class="math inline">\(G_2(s)\)</span>.</p>
<table>
<tbody><tr>
<td>
<img src="./pics/09_Models_of_Control_Devices_and_Systems_cascade.png" alt="09_Models_of_Control_Devices_and_Systems_cascade" style="width: 350px;">
</td></tr>
</tbody></table>
<p>If <span class="math inline">\(R(s)\)</span> is the input to the first block and <span class="math inline">\(Y(s)\)</span> is the output of the entire setup, and <span class="math inline">\(X(s)\)</span> is the signal between the two blocks, we can state:</p>
<p><span class="math display">\[
\begin{align}
X(s) &amp;= G_1(s)*R(s)\\
Y(s) &amp;= G_2(s)*X(s)\\
\end{align}
\]</span></p>
<p>Combining these equations, we derive:</p>
<p><span class="math display">\[
Y(s) =  G_1(s) \cdot G_2(s) \cdot R(s)
\]</span></p>
<p>This illustrates that when two blocks (or subsystems) are cascaded, their transfer functions can be multiplied to ascertain the relationship between the input and the output.</p>
</section>
<section id="summing-junctions-take-off-points" class="level2">
<h2 class="anchored" data-anchor-id="summing-junctions-take-off-points">Summing Junctions &amp; Take-off Points</h2>
<p>We’ve also frequently seen circles together with algebraic signs in our block diagrams. These denote either <em>error detectors</em> or <em>summing junctions</em>.</p>
<table>
<tbody><tr>
<td>
<img src="./pics/09_Models_of_Control_Devices_and_Systems_summation_point.png" alt="09_Models_of_Control_Devices_and_Systems_summation_point" style="width: 350px;">
</td></tr>
</tbody></table>
<p>For instance, if <span class="math inline">\(R(s)\)</span> and <span class="math inline">\(B(s)\)</span> are signals at a junction, the resulting signal <span class="math inline">\(E(s)\)</span> is calculated as:</p>
<p><span class="math display">\[E(s)=R(s)−B(s)\]</span></p>
<p>or <span class="math inline">\(E(s)=R(s)+B(s)\)</span> if the signals are being added.</p>
<p>This symbolic representation serves as a convenient method to depict algebraic manipulations of multiple signals.</p>
<p>In some instances, we might wish to tap into a signal for feedback. Such take-offs (or banch-offs) have been illustrated in our diagrams by branching off a main signal line. This ensures that the value of the signal being fed back remains consistent.</p>
<table>
<tbody><tr>
<td>
<img src="./pics/09_Models_of_Control_Devices_and_Systems_take_off_point.png" alt="09_Models_of_Control_Devices_and_Systems_take_off_point" style="width: 350px;">
</td></tr>
</tbody></table>
<p>To summarize, any system can be comprehensively represented using a combination of these four foundational block diagram elements: a basic block, cascaded blocks, summing junctions, and take-off points.</p>
<section id="liquid-level-system-a-detailed-look" class="level3">
<h3 class="anchored" data-anchor-id="liquid-level-system-a-detailed-look">Liquid Level System: A Detailed Look</h3>
<p>To provide further clarity, let’s discuss a liquid level system.</p>
<table>
<tbody><tr>
<td>
<img src="./pics/09_Models_of_Control_Devices_and_Systems_one_tank.png" alt="09_Models_of_Control_Devices_and_Systems_one_tank" style="width: 350px;">
</td></tr>
</tbody></table>
<p>When modeling a single tank, we primarily concern ourselves with the dynamics between the inflow, outflow, and the height of the liquid. The most common and simplified model is based on the balance of liquid volume, considering the inflow and outflow rates.</p>
<p>Basic Assumptions:</p>
<ul>
<li>The cross-sectional area of the tank is constant.</li>
<li>The liquid in the tank is well-mixed and has a uniform density.</li>
<li>The outflow rate depends on the liquid height (due to gravitational pressure).</li>
</ul>
<p>This system’s primary objective is to control the liquid height within a tank. When modeling such a tank, we often derive a first-order system model, with the tank’s dynamics epitomized by a system gain and time constant.</p>
<p><span class="math display">\[
\frac{H_1(s)}{Q_i(s)} = \frac{\frac{R_1}{\rho g}}{\tau_1 s+1}
\]</span></p>
<p>Where:</p>
<ul>
<li><span class="math inline">\(H(s)\)</span> is the Laplace transform of the liquid height <span class="math inline">\(h(t)\)</span>.</li>
<li><span class="math inline">\(Q_i(s)\)</span> is the Laplace tranform of the inflow rate <span class="math inline">\(q_in(t)\)</span>.</li>
<li><span class="math inline">\(\rho\)</span> is the density of the liquid</li>
<li><span class="math inline">\(g\)</span> is the acceleration due to gravity.</li>
<li><span class="math inline">\(R\)</span>: resistance to the flow, typically determined by the size and shape of the outlet.</li>
</ul>
<p>Consider two tanks. <em>The second tank’s input comes from the first tank’s output</em>. By using our previously derived models, and if we factor in the input flow and liquid height, we can determine the relationship between the tanks and their respective outputs.</p>
<table>
<tbody><tr>
<td>
<img src="./pics/09_Models_of_Control_Devices_and_Systems_two_tanks.png" alt="09_Models_of_Control_Devices_and_Systems_two_tanks" style="width: 350px;">
</td></tr>
</tbody></table>
<p>We can model the second tank as we did for the first one:</p>
<p><span class="math display">\[
\frac{H_2(s)}{Q_1(s)} = \frac{\frac{R_2}{\rho g}}{\tau_2 s+1}
\]</span></p>
<p>we can represent this dynamic relationship with block diagrams:</p>
<table>
<tbody><tr>
<td>
<img src="./pics/09_Models_of_Control_Devices_and_Systems_two_tanks_block_diagram-corrected.png" alt="09_Models_of_Control_Devices_and_Systems_two_tanks_block_diagram" style="width: 350px;">
</td></tr>
</tbody></table>
<p>The input for the second system is <span class="math inline">\(Q_1(s)\)</span>. However:</p>
<p><span class="math display">\[
q_1 = \frac{p_1}{R_1}
\]</span></p>
<p>where <span class="math inline">\(p_1\)</span> is the pressure at the outflow of the first tank, and the total pressure is <span class="math inline">\(\bar{p_1}+p_1\)</span>, and <span class="math inline">\(\bar{p_1}\)</span> is the static pressure.</p>
<p>We can hence write:</p>
<p><span class="math display">\[
q_1 = \frac{p_1}{R_1} = \frac{\rho g h_1}{R_1}
\]</span></p>
<p>And this is how we can relate <span class="math inline">\(Q_1\)</span> and <span class="math inline">\(H_1\)</span>, but note that the output of the first tank, according to our model is <span class="math inline">\(H_1\)</span> and not <span class="math inline">\(Q_1\)</span>, the second transfer function is different from the first one.</p>
<p>For the second system, the input is <span class="math inline">\(Q_1\)</span> (inflow) and the controlled variable is <span class="math inline">\(H_2\)</span>.</p>
<p>However, a crucial point of note is that the dynamics of the second tank, do not influence the dynamics of the first tank. This characteristic implies that the second system doesn’t “load” the first. Only in such scenarios can the transfer functions of the two systems be multiplied.</p>
<p>Yet, if the tanks were connected differently, where the second tank’s pressure influences the first tank’s flow, then this “loading” effect would prevent us from simply multiplying their transfer functions. This loading effect can drastically alter the system’s dynamics, even changing a first-order system to a second-order one.</p>
<table>
<tbody><tr>
<td>
<img src="./pics/09_Models_of_Control_Devices_and_Systems_two_tanks_alternative.png" alt="09_Models_of_Control_Devices_and_Systems_two_tanks_alternative" style="width: 450px;">
</td></tr>
</tbody></table>
<p>If we model this case.</p>
<p>The rate of storage in the tank 1 is:</p>
<p><span class="math display">\[
\begin{align}
C_1\frac{dp_1}{dt} &amp;= q_i - \frac{p_1-p_2}{R_1}
\end{align}
\]</span></p>
<p>and the rate of storage in the second tank is:</p>
<p><span class="math display">\[
\begin{align}
C_2\frac{dp_2}{dt} &amp;= q_1 - \frac{p_2}{R_2}
\end{align}
\]</span></p>
<p>where <span class="math inline">\(p_2\)</span> is the pressure of the second tank. Notice how this affects the flow of the first tank (right most term in the equation (1) above), and hence there is a loading effect of the second tank on the first one.</p>
<p>In this case, the two systems cannot be written as cascading systems! The two subsystems are not independent, and they cannot be considered as two separate blocks.</p>
<p>We can find the overall transfer function as (obtained from the previous two equations):</p>
<p><span class="math display">\[
\frac{H_2(s)}{Q_i(s)} = \frac{\frac{R_2}{\rho g}}{\tau_1\tau_2s^2+(\tau_1 + \tau_2 + \frac{R_2}{R_1})s + 1}
\]</span></p>
<p>Note, while in liquid and thermal systems, we typically have first-order systems, the presence of a loading effect produces a second-order system. In industrial settings, individual tanks are generally modeled using a time constant and system gain. When connected in non-loading fashion, the system’s transfer function remains a second-order one, but is represented by two distinct time constants. In contrast, when connected in a loading manner, the system’s transfer function is again second-order, but characterized by a quadratic lag.</p>
<p>To reiterate and emphasize: In our block diagram representations, if we depict two systems, <span class="math inline">\(G_1\)</span> and <span class="math inline">\(G_2\)</span>, in cascade, it’s implied that <span class="math inline">\(G_2\)</span> doesn’t load <span class="math inline">\(G_1\)</span>. This is a crucial assumption that ensures the accuracy of our models and subsequent calculations.</p>
<p>You can have suitable buffers (electrical, hydraulic, thermal, etc.) to avoid the loading effect and the two transfer function can be considered independently. If this is not possible then the two systems must be considered together and will be represented by a single transfer function.</p>
</section>
<section id="sidebar---modeling-a-single-tank" class="level3">
<h3 class="anchored" data-anchor-id="sidebar---modeling-a-single-tank">Sidebar - Modeling a Single Tank</h3>
<p>When modeling a single tank, we primarily concern ourselves with the dynamics between the inflow, outflow, and the height of the liquid. The most common and simplified model is based on the balance of liquid volume, considering the inflow and outflow rates.</p>
<section id="basic-assumptions" class="level4">
<h4 class="anchored" data-anchor-id="basic-assumptions">Basic Assumptions:</h4>
<ol type="1">
<li>The cross-sectional area of the tank is constant.</li>
<li>The liquid in the tank is well-mixed and has a uniform density.</li>
<li>The outflow rate depends on the liquid height (due to gravitational pressure).</li>
</ol>
</section>
<section id="mathematical-representation" class="level4">
<h4 class="anchored" data-anchor-id="mathematical-representation">Mathematical Representation:</h4>
<p>Let’s define the following variables:</p>
<ul>
<li>$ h(t) $: height of the liquid at time $ t $.</li>
<li>$ A $: cross-sectional area of the tank.</li>
<li>$ Q_{in}(t) $: inflow rate at time $ t $.</li>
<li>$ Q_{out}(t) $: outflow rate at time $ t $.</li>
<li>$ $: density of the liquid.</li>
<li>$ g $: acceleration due to gravity.</li>
<li>$ R $: resistance to the flow, typically determined by the size and shape of the outlet.</li>
</ul>
<p>From the principle of conservation of mass:</p>
<p><span class="math display">\[
A \frac{dh(t)}{dt} = Q_{in}(t) - Q_{out}(t)
\]</span></p>
<p>Using Torricelli’s law, the outflow rate, $ Q_{out}(t) $, from the tank through an orifice can be related to the height of the liquid:</p>
<p><span class="math display">\[
Q_{out}(t) = \frac{\rho g h(t)}{R}
\]</span></p>
<p>Substitute the outflow rate in the conservation of mass equation:</p>
<p><span class="math display">\[
A \frac{dh(t)}{dt} = Q_{in}(t) - \frac{\rho g h(t)}{R}
\]</span></p>
<p>This is a first-order differential equation which represents the dynamics of the tank. It relates the rate of change of liquid height to the inflow and the height itself. The solution to this equation, given appropriate initial conditions, will give you the height of the liquid in the tank as a function of time.</p>
</section>
<section id="transfer-function-model" class="level4">
<h4 class="anchored" data-anchor-id="transfer-function-model">Transfer Function Model:</h4>
<p>In control theory, it’s often useful to describe systems in the frequency domain using a transfer function. The transfer function of the tank can be derived by taking the Laplace transform of the differential equation. Assuming zero initial conditions and denoting the Laplace transform variable as $ s $:</p>
<p><span class="math display">\[
A s H(s) = Q_{in}(s) - \frac{\rho g}{R} H(s)
\]</span></p>
<p>Where: - $ H(s) $ is the Laplace transform of the liquid height $ h(t) $. - $ Q_{in}(s) $ is the Laplace transform of the inflow rate $ Q_{in}(t) $.</p>
<p>Rearranging and solving for the transfer function $ G(s) = $:</p>
<p><span class="math display">\[
G(s) = \frac{A}{As + \frac{\rho g}{R}}
\]</span></p>
<p>This transfer function relates the liquid height to the inflow rate in the frequency domain.</p>
<p>Rearrange the terms:</p>
<p><span class="math display">\[
A \frac{dh(t)}{dt} + \frac{\rho g h(t)}{R} = Q_{in}(t)
\]</span></p>
<p>Now, let’s take the Laplace transform of both sides. Assuming zero initial conditions:</p>
<p><span class="math display">\[
A s H(s) + \frac{\rho g}{R} H(s) = Q_{in}(s)
\]</span></p>
<p>Factor out <span class="math inline">\(H(s)\)</span>:</p>
<p><span class="math display">\[
H(s) \Big( A s + \frac{\rho g}{R} \Big) = Q_{in}(s)
\]</span></p>
<p>which brings:</p>
<p><span class="math display">\[
G(s) = \frac{H(s)}{Q_{in}(s)} = \frac{1}{\Big( A s + \frac{\rho g}{R} \Big)}
\]</span></p>
<p>Now, the steady-state gain of the system, when <span class="math inline">\(s=0\)</span>, is:</p>
<p><span class="math display">\[
\frac{1}{\frac{\rho g}{R}} = \frac{R}{\rho g}
\]</span></p>
<p>Setting <span class="math inline">\(A=\tau\)</span> - the time constant τ is equal to the cross-sectional area <span class="math inline">\(A\)</span> of the tank, we obtain:</p>
<p><span class="math display">\[
\frac{H(s)}{Q_{in}(s)} = \frac{\frac{R}{\rho g}}{\tau s+1}
\]</span></p>
<p>— END OF SIDEBAR</p>
</section>
</section>
</section>
<section id="block-diagram-fundamentals" class="level1">
<h1>Block Diagram Fundamentals</h1>
<p>Before we delve into the intricacies of the feedback control system, let’s take a moment to summarize the four main components we’ve previously discussed.</p>
<ol type="1">
<li>Basic Transfer Function: A simple representation of a system’s dynamics with an input <span class="math inline">\(R\)</span> and an output <span class="math inline">\(Y\)</span>. This system is denoted by a transfer function <span class="math inline">\(G\)</span>.</li>
<li>Cascade of Blocks: Two transfer functions, say <span class="math inline">\(G_1\)</span> and <span class="math inline">\(G_2\)</span>, arranged in series. The input to the first block is <span class="math inline">\(R\)</span>, and the final output from the second block is <span class="math inline">\(Y\)</span>.</li>
<li>Summing Junction: A point in the block diagram where two signals are algebraically added or subtracted. A typical representation includes a circle with “+” and “-” signs, indicating how the incoming signals are combined.</li>
<li>Take-off Point: A location in the block diagram where a signal, say <span class="math inline">\(Y\)</span>, is branched off without any change. This is typically used for feedback loops.</li>
</ol>
<p><strong>Pop-up Question</strong>: Why do we need a take-off point in a feedback control system?</p>
<p><strong>Answer</strong>: The take-off point allows us to use the system’s output (or some processed version of it) to be fed back into the system, typically for comparison with the reference or command signal.</p>
</section>
<section id="an-overview-of-the-feedback-control-system" class="level1">
<h1>An Overview of the Feedback Control System</h1>
<p>Let’s now consider the comprehensive block diagram of a generic feedback control system:</p>
<table>
<tbody><tr>
<td>
<img src="./pics/09_Models_of_Control_Devices_and_Systems_control-diagram.png" alt="09_Models_of_Control_Devices_and_Systems_control-diagram" style="width: 650px;">
</td></tr>
</tbody></table>
<ol type="1">
<li><strong>Command Signal</strong>: <span class="math inline">\(y_r\)</span> is the desired or set-point signal.</li>
<li><strong>Reference Input Elements</strong>: These elements transform the command signal into a reference signal <span class="math inline">\(r\)</span>, using a transfer function <span class="math inline">\(A(s)\)</span>. For example, a desired temperature (<span class="math inline">\(y_r\)</span>) is converted into a voltage (<span class="math inline">\(r\)</span>).</li>
<li><strong>Error Detector</strong>: This is a summing junction where the reference signal <span class="math inline">\(r\)</span> and the feedback signal <span class="math inline">\(b\)</span> are algebraically combined to produce the actuating error signal <span class="math inline">\(\hat{e}\)</span>.</li>
<li><strong>Controller</strong>: Denoted by <span class="math inline">\(D(s)\)</span>, this block processes the error signal to generate a control signal <span class="math inline">\(u\)</span>.</li>
<li><strong>Actuator</strong>: Represented by <span class="math inline">\(G_A(s)\)</span>, it’s the system’s muscle that amplifies or modifies the control signal to produce the manipulated variable <span class="math inline">\(m\)</span>.</li>
<li><strong>Plant</strong>: This is the main system we want to control, represented by <span class="math inline">\(G_P(s)\)</span>. The output of the plant is the controlled variable <span class="math inline">\(y\)</span>.</li>
<li><strong>Sensor</strong>: The sensor, characterized by <span class="math inline">\(H(s)\)</span>, measures the controlled variable and produces a feedback signal <span class="math inline">\(b\)</span>. For example, the output (<span class="math inline">\(y\)</span>) can be temperature and the sensor block converts it to voltage (<span class="math inline">\(b\)</span>).</li>
<li><strong>Disturbance</strong>: <span class="math inline">\(w\)</span> is an unwanted input that can affect the system’s output. It can happen everywhere, but we model it as if it enters the system at a summing point before the plant.</li>
</ol>
<section id="comments" class="level3">
<h3 class="anchored" data-anchor-id="comments">Comments</h3>
<ol type="1">
<li><p>Moving forward, we will omit the <span class="math inline">\(Z(s)\)</span> subsystem responsible for producing the indirectly controlled variable. Since it doesn’t play a role within the feedback loop, our primary attention will be directed towards the controlled variable <span class="math inline">\(y\)</span>.</p></li>
<li><p>Actuating vs System Error: The difference between <span class="math inline">\(\hat{e}\)</span> and <span class="math inline">\(e\)</span> is crucial. While <span class="math inline">\(\hat{e}\)</span> is the signal exciting the controller, i.e., the difference between <span class="math inline">\(b\)</span> and <span class="math inline">\(r\)</span>; <span class="math inline">\(e\)</span> is the real error between the controlled variable <span class="math inline">\(y\)</span> and the command signal <span class="math inline">\(y_r\)</span>. It is important to understand that <span class="math inline">\(b\ne y\)</span>. Our primary goal in a feedback system is to minimize <span class="math inline">\(e\)</span>, bringing the system’s output close to the desired set-point.</p></li>
</ol>
<p>We call: - <span class="math inline">\(e=y-y_r\)</span>, the system error signal. - <span class="math inline">\(\bar{e} = r-b\)</span>, is the actuacting error signal.</p>
<p>The difference between the two signals depends on the specific <span class="math inline">\(A(s)\)</span> and <span class="math inline">\(H(s)\)</span>.</p>
</section>
<section id="standard-block-diagram-for-feedback-design" class="level2">
<h2 class="anchored" data-anchor-id="standard-block-diagram-for-feedback-design">Standard Block Diagram for Feedback Design</h2>
<p>For ease of analysis, we can rearrange the block diagram.</p>
<table>
<tbody><tr>
<td>
<img src="./pics/09_Models_of_Control_Devices_and_Systems_control-diagram-standard.png" alt="09_Models_of_Control_Devices_and_Systems_control-diagram-standard" style="width: 650px;">
</td></tr>
</tbody></table>
<p>In this diagram: - The transfer function between <span class="math inline">\(Y\)</span> and <span class="math inline">\(W\)</span> is <span class="math inline">\(G_P(s)\)</span>. - The transfer function between <span class="math inline">\(Y\)</span> and <span class="math inline">\(U\)</span> is <span class="math inline">\(G_A(s)G_P(s)\)</span>.</p>
</section>
<section id="a-convenient-block-diagram" class="level2">
<h2 class="anchored" data-anchor-id="a-convenient-block-diagram">A Convenient Block Diagram</h2>
<p>We can also manipulate the diagram for further convenience.</p>
<table>
<tbody><tr>
<td>
<img src="./pics/09_Models_of_Control_Devices_and_Systems_control-diagram-standard-noise.png" alt="09_Models_of_Control_Devices_and_Systems_control-diagram-standard-noise" style="width: 650px;">
</td></tr>
</tbody></table>
<p>In this diagram: - The transfer function between <span class="math inline">\(Y\)</span> and <span class="math inline">\(W\)</span> is <span class="math inline">\(N(s)\)</span>. - The transfer function between <span class="math inline">\(Y\)</span> and <span class="math inline">\(U\)</span> is <span class="math inline">\(G_A(s)G_P(s)\)</span>.</p>
<p>By setting <span class="math inline">\(N(s)=G_P(s)\)</span>, both diagrams become identical. Consequently, the position of the summing junction becomes inconsequential. Furthermore, the two subsystems, <span class="math inline">\(G_A(s)\)</span> and <span class="math inline">\(G_P(s)\)</span> can be combined to form a unified transfer function represented as <span class="math inline">\(G=G_A(s)G_P(s)\)</span>.</p>
<p>The diagram becomes:</p>
<table>
<tbody><tr>
<td>
<img src="./pics/09_Models_of_Control_Devices_and_Systems_control-diagram-standard-noise-plant.png" alt="09_Models_of_Control_Devices_and_Systems_control-diagram-standard-noise-plant" style="width: 650px;">
</td></tr>
</tbody></table>
<p>As we progress deeper into the realm of control systems, our visual representation of systems—block diagrams—become indispensable. These diagrams are symbolic representations of the mathematical equations that describe our system. But like any language, there are many ways to convey the same message. Thus, manipulating our block diagrams for clarity or convenience is often necessary.</p>
<p><strong>Pop question</strong>: Manipulate the block diagram so that the block <span class="math inline">\(A(s)\)</span> does not appear in the forward path. - Hint: the signal <span class="math inline">\(\hat{e}\)</span> must be the same in both cases.</p>
<p><strong>Answer</strong>: <span class="math inline">\(\hat{e} = Ay_r - Hy\)</span>. If we were to compute the controlled signal <span class="math inline">\(u\)</span> in this setup, it would be:</p>
<p><span class="math display">\[ u = DAy_r − DHy\]</span></p>
<p>This equation describes the relationship between the command signal (<span class="math inline">\(y_r\)</span>), the controlled signal (<span class="math inline">\(u\)</span>), and the outpu (<span class="math inline">\(y\)</span>).</p>
<p>If we move the subsystem <span class="math inline">\(A(s)\)</span> after the summation junction:</p>
<table>
<tbody><tr>
<td>
<img src="./pics/09_Models_of_Control_Devices_and_Systems_control-diagram-2.png" alt="09_Models_of_Control_Devices_and_Systems_control-diagram-2" style="width: 650px;">
</td></tr>
</tbody></table>
<p>In this modified version, our controlled signal <span class="math inline">\(u\)</span> can be expressed as:</p>
<p><span class="math display">\[
u = ADy_r - \frac{H}{A}ADy
\]</span></p>
<p>The comparison of these two equations confirms the equivalence of both block diagrams. The transformations we applied to go from the initial to the simplified diagram are purely symbolic, yet they present the system in a more digestible manner. We do this because the resulting system becomes more convenient.</p>
<p>Note: - In this last diagram we can say <span class="math inline">\(y_r=r\)</span> because there is no explicit reference element. Moving the block <span class="math inline">\(A\)</span> inside the feedback loop, the mathematic representation would be identical and we can say <span class="math inline">\(y_r=r\)</span>. Note that physically it might not make any sense, but the mathematical equations would be the same.</p>
<ul>
<li>If <span class="math inline">\(H=A\)</span> then the signal out of the summation junction becomes <span class="math inline">\(e=y_r-y\)</span>. In all other cases is <span class="math inline">\(\hat{e}\)</span>.</li>
</ul>
<p><strong>Popup Question</strong>: Why is it essential to confirm the equivalence of the two block diagrams?</p>
<p><strong>Answer</strong>: Confirming the equivalence ensures that our simplifications or manipulations don’t inadvertently alter the system’s behavior. The system’s performance and response should remain unchanged regardless of its representation.</p>
</section>
<section id="unity-feedback-system" class="level2">
<h2 class="anchored" data-anchor-id="unity-feedback-system">Unity Feedback System</h2>
<p>A further transformation can lead us to what’s referred to as a “Unity Feedback System”.</p>
<p>When <span class="math inline">\(H(s)\)</span> matches <span class="math inline">\(A(s)\)</span> — meaning the sensor transfer function aligns with the reference transfer function (a scenario which might be intentionally designed) — the block diagram becomes more streamlined:</p>
<table>
<tbody><tr>
<td>
<img src="./pics/09_Models_of_Control_Devices_and_Systems_control_unity_feedback.png" alt="09_Models_of_Control_Devices_and_Systems_control_unity_feedback" style="width: 650px;">
</td></tr>
</tbody></table>
<p>This block diagram is of paramount importance. Frequently, we can adapt the system to align with this depiction, making it particularly advantageous for design considerations. Due to its significance, it’s referred to as the “unity-feedback system.”</p>
<p>The term “unity” here does not necessarily imply that the sensor transfer function H(s)H(s) is unity (or 1). Rather, through careful manipulation and under certain conditions (like <span class="math inline">\(H=A\)</span>), we can arrive at a block diagram representation that seems to imply a direct feedback without any transformation. But remember, this is just a representation.</p>
<p>A common misconception is the belief that the signal <span class="math inline">\(y\)</span> is fed back directly to the summation junction without the intervention of a sensor, or under the assumption that the sensor transfer function is always 1. However, this isn’t necessarily true. While the sensor transfer function can indeed be 1, there can also be a distinct sensor transfer function <span class="math inline">\(H\)</span>. By judiciously selecting the reference transfer function, one can achieve the unity feedback structure.</p>
</section>
</section>
<section id="the-design-feedback-block-diagram" class="level1">
<h1>The Design Feedback Block Diagram</h1>
<p>With the previous discussions in mind we can further simplify our block diagram to obtain a form that will be very useful when designing feedback control systems:</p>
<table>
<tbody><tr>
<td>
<img src="./pics/09_Models_of_Control_Devices_and_Systems_design_feedback_diagram.png" alt="09_Models_of_Control_Devices_and_Systems_design_feedback_diagram" style="width: 650px;">
</td></tr>
</tbody></table>
<p>Within this model, the blocks <span class="math inline">\(D\)</span>, <span class="math inline">\(G\)</span>, and <span class="math inline">\(H\)</span> are broad in scope, representing the cumulative effects of all elements along their respective paths. It’s essential to recognize that these blocks might not mirror individual physical components directly. They often emerge from strategic simplifications and rearrangements of the system’s foundational equations.</p>
<p>To delve deeper:</p>
<ul>
<li><p><span class="math inline">\(D(s)\)</span> primarily signifies the controller’s transfer function. While the controller plays a pivotal role in this block, its composition might also reflect other system adjustments.</p></li>
<li><p><span class="math inline">\(G(s)\)</span> amalgamates the dynamics of both the plant and the actuators. Despite its composite nature, we’ll continue to label it as the “Plant” due to its predominant influence.</p></li>
<li><p><span class="math inline">\(H(s)\)</span>, on the other hand, isn’t restricted to representing only the sensor’s transfer function. Given its broader role, it’s more aptly described as the “transfer function of the feedback path.”</p></li>
</ul>
<p>Note that in this block diagram only the actuation error signal <span class="math inline">\(\bar{e}\)</span> is present. The signal <span class="math inline">\(y_r\)</span> is not even present in this block diagram. It should be clear however that when you are calculating the total performance of your system you should be calculating the error <span class="math inline">\(e = y_r - y\)</span>. This error is crucial when analyzing the system’s performance, even if it’s not explicitly part of our primary feedback loop.</p>
<p><strong>Popup Question</strong>: What do the blocks <span class="math inline">\(D\)</span>, <span class="math inline">\(G\)</span>, and <span class="math inline">\(H\)</span> represent in our new block diagram? <strong>Answer</strong>: They represent cumulative effects and relationships along their respective paths, not necessarily directly mirroring individual physical components.</p>
<section id="disturbances-matter" class="level2">
<h2 class="anchored" data-anchor-id="disturbances-matter">Disturbances Matter</h2>
<p>Lastly, a crucial element we should never overlook is the disturbance, which we represent as <span class="math inline">\(w\)</span>.</p>
<p>The very essence of feedback control theory revolves around disturbances. If our systems experienced no disturbances, the entire field of feedback control might not exist. Open-loop systems could handle undisturbed scenarios perfectly well.</p>
<table>
<tbody><tr>
<td>
<img src="./pics/09_Models_of_Control_Devices_and_Systems_design_feedback_diagram_with_noise.png?1" alt="09_Models_of_Control_Devices_and_Systems_design_feedback_diagram_with_noise" style="width: 650px;">
</td></tr>
</tbody></table>
<p>This will be the Feedback Block Diagram that we will mostly use.</p>
<p>These block diagrams are to represent the relationships between signals of interest. They are constructed to capture the dynamic relationship between all the variables.</p>
<p>When you model a system, you will always be able to reconduct its model to one of these standard block diagrams.</p>
<p><strong>Popup Question</strong>: Why are disturbances crucial in feedback control systems?</p>
<p><strong>Answer</strong>: Disturbances are unexpected or unpredictable changes in a system’s environment or inputs. Feedback control systems are designed to mitigate the effects of these disturbances, ensuring the system operates as desired despite these unforeseen changes.</p>
</section>
</section>
<section id="closed-loop-transfer-function" class="level1">
<h1>Closed-loop transfer function</h1>
<p>Given our standard block diagram, with <span class="math inline">\(R\)</span> as the reference input and blocks <span class="math inline">\(D\)</span>, <span class="math inline">\(G\)</span>, <span class="math inline">\(N\)</span>, and <span class="math inline">\(H\)</span> as defined earlier.</p>
<table>
<tbody><tr>
<td>
<img src="./pics/09_Models_of_Control_Devices_and_Systems_design_feedback_diagram_with_noise.png" alt="09_Models_of_Control_Devices_and_Systems_design_feedback_diagram_with_noise" style="width: 650px;">
</td></tr>
</tbody></table>
<p>Now, let’s determine the closed-loop transfer function:</p>
<p><span class="math display">\[\frac{Y(s)}{R(s)}=?\]</span></p>
<p>Note that this is a two inputs, one output system. We need to apply <em>superposition</em> and consider one input at a time:</p>
<section id="setting-disturbance-to-zero" class="level2">
<h2 class="anchored" data-anchor-id="setting-disturbance-to-zero">Setting Disturbance to Zero</h2>
<p><span class="math display">\[\frac{Y(s)}{R(s)}\Big|_{w=0}=\frac{D(s)G(s)}{1+D(s)G(s)H(s)} = M(s)\]</span></p>
<p>It’s important to note that if our system were a positive feedback loop instead, this equation would see a minus sign in the denominator.</p>
<p>This is called <strong>Reference Transfer Function</strong> because it relates the reference <span class="math inline">\(R\)</span> with the output <span class="math inline">\(Y\)</span>.</p>
</section>
<section id="setting-the-reference-input-to-zero" class="level2">
<h2 class="anchored" data-anchor-id="setting-the-reference-input-to-zero">Setting the Reference Input to Zero</h2>
<p>We are now interested in the transfer function between the system output <span class="math inline">\(Y\)</span> and the disturbance input <span class="math inline">\(W\)</span>, represented as:</p>
<table>
<tbody><tr>
<td>
<img src="./pics/09_Models_of_Control_Devices_and_Systems_design_feedback_diagram_tf_with_disturbance.png" alt="09_Models_of_Control_Devices_and_Systems_design_feedback_diagram_tf_with_disturbance" style="width: 650px;">
</td></tr>
</tbody></table>
<p><span class="math display">\[
\frac{Y(s)}{W(s)}\Big|_{R(s)=0} = ?
\]</span></p>
<p>This transfer function effectively captures the system’s response to disturbances. It’s a measure of how external disturbances are filtered or amplified by the system dynamics before influencing the output.</p>
<p>To make our task more manageable, we can streamline our block diagram by combining elements. Specifically, by taking the negative sign of the error detector and consolidating it with our existing minus sign, we can simplify our representation.</p>
<table>
<tbody><tr>
<td>
<img src="./pics/09_Models_of_Control_Devices_and_Systems_design_feedback_diagram_tf_with_disturbance-1.png" alt="09_Models_of_Control_Devices_and_Systems_design_feedback_diagram_tf_with_disturbance-1" style="width: 650px;">
</td></tr>
</tbody></table>
<p>From this modified diagram, we can derive two fundamental relationships:</p>
<ol type="1">
<li><span class="math inline">\(\hat{E}(s) = -H(s)Y(s)\)</span></li>
<li><span class="math inline">\(Y(s) = D(s)G(s)\hat{E}(s) + N(s)W(s)\)</span></li>
</ol>
<p>By manipulating and combining these equations, we can eliminate <span class="math inline">\(\hat{E}(s)\)</span> to determine the relationship between <span class="math inline">\(Y(s)\)</span> and <span class="math inline">\(W(s)\)</span>.</p>
<p><span class="math display">\[
Y(s) = -D(s)G(s)H(s)Y(s) + N(s)W(s)
\]</span></p>
<p>And therefore:</p>
<p><span class="math display">\[
\frac{Y(s)}{W(s)}\Big|_{R(s)=0} = \frac{N(s)}{1+D(s)G(s)H(s)} = M_W(s)
\]</span></p>
<p>This is called <strong>Disturbance Transfer Function</strong>.</p>
<p>**Note that both in the reference transfer funtion and in the disturbance transfer function the denominator is the same: <span class="math inline">\(1+D(s)G(s)H(s)\)</span>.</p>
</section>
<section id="the-loop-transfer-function" class="level2">
<h2 class="anchored" data-anchor-id="the-loop-transfer-function">The loop transfer function</h2>
<p>The expression:</p>
<p><span class="math display">\[
D(s)G(s)H(s)
\]</span></p>
<p>is termed as the “Loop Transfer Function”. This name originates from the fact that it represents the combined effect of all the transfer functions present within the feedback loop.</p>
<p><strong>Popup Question</strong>: Why is the denominator the same for both the reference and disturbance transfer functions?</p>
<p><strong>Answer</strong>: The denominator represents the loop transfer function, which is the product of all transfer functions in the feedback loop. This remains consistent, irrespective of the input under consideration.</p>
</section>
</section>
<section id="concluding-remarks-on-transfer-functions-diagrams" class="level1">
<h1>Concluding Remarks on Transfer Functions Diagrams</h1>
<p>Our exploration into transfer functions has provided us with two critical equations:</p>
<p>The reference transfer function, <span class="math inline">\(M(s)\)</span>, which describes the relationship between the system output and the reference input. The disturbance transfer function, <span class="math inline">\(M_W(s)\)</span>, which captures the system’s response to external disturbances.</p>
<p>With these transfer functions in hand, we can represent our system with a more compact block diagram:</p>
<table>
<tbody><tr>
<td>
<img src="./pics/09_Models_of_Control_Devices_and_Systems_final_block_diagram.png" alt="09_Models_of_Control_Devices_and_Systems_final_block_diagram" style="width: 450px;">
</td></tr>
</tbody></table>
<p>This condensed representation, which is the equivalent represention of the standard block diagrams we saw before, is invaluable for system analysis as it directly links the system output to the reference and disturbance inputs. By focusing on these transfer functions, we can gain insights into system behavior, stability, and performance.</p>
</section>
<section id="advanced-block-diagram-reduction" class="level1">
<h1>Advanced Block Diagram Reduction</h1>
<p>We delved into the foundations of block diagrams and their reduction procedures. As we progress further into the domain of automatic control, understanding block diagrams becomes paramount. These graphical representations enable us to visualize complex systems, making their analysis and design more intuitive.</p>
<p>Block diagrams are more than mere schematic representations of system equations. These diagrams offer a gateway to simplifying intricate control systems. Their primary utility lies in helping us understand the system’s behavior without delving deep into intricate mathematical equations.</p>
<p>The idea is simple: any practical control system, no matter how complex, can be distilled down to a block diagram. The essence of this representation, as emphasized previously, stems from its ability to encapsulate system equations visually.</p>
<section id="dissecting-a-multi-loop-system" class="level2">
<h2 class="anchored" data-anchor-id="dissecting-a-multi-loop-system">Dissecting a Multi-loop System</h2>
<p>Consider a multi-loop configuration, as presented in our example. The diagram showcases multiple loops, with the primary loop being the one where the controlled output, <span class="math inline">\(Y\)</span>, is fed back against the reference input <span class="math inline">\(R\)</span>. This primary loop is complemented by several minor feedback loops, making the system’s structure more intricate.</p>
<table>
<tbody><tr>
<td>
<img src="./pics/09_Models_of_Control_Devices_and_Systems_MultiLoop_System_Example.png" alt="09_Models_of_Control_Devices_and_Systems_MultiLoop_System_Example" style="width: 650px;">
</td></tr>
</tbody></table>
<p>The challenge lies in determining the relationship between <span class="math inline">\(Y\)</span> and <span class="math inline">\(R\)</span>. This is the relationship that I need from a control perspective.</p>
<p>Note that if we were given the differential equations we could have manipulated them directly to obtain the desired relationship. Alternatively, given the equations we can write the equivalent block diagram and then manipulate the block diagram to obtain the relationship that we need between any variable of interest.</p>
<p>The challenge here is that often these diagrams aren’t immediately reducible to a basic feedback loop. Therefore, we might need to rearrange summing junctions, take-off points, or even move blocks around to create identifiable basic feedback loops.</p>
<section id="solution" class="level3">
<h3 class="anchored" data-anchor-id="solution">Solution</h3>
<ol type="1">
<li><strong>Identifying the Basic Feedback Loop:</strong></li>
</ol>
<p>Our first task is to transform the multi-loop system into basic feedback loops. A basic feedback loop provides a direct relationship between the input and output, facilitating a simpler analysis.</p>
<table>
<tbody><tr>
<td>
<img src="./pics/09_Models_of_Control_Devices_and_Systems_basic_diagram.png" alt="09_Models_of_Control_Devices_and_Systems_basic_diagram" style="width: 450px;">
</td></tr>
</tbody></table>
<p><em>Figure: Basic Feedback Loop</em></p>
<ol start="2" type="1">
<li><strong>Manipulating the Block Diagram:</strong> There are no basic feedback loops in our diagram for now.</li>
</ol>
<p>To achieve a basic feedback loop, we may need to relocate summing junctions or take-off points. The goal is to identify and isolate these basic loops, making the system more amenable to analysis.</p>
<ol start="3" type="1">
<li><strong>Applying Reduction Formulas:</strong> Once the basic feedback loops are identified, we apply the standard formula:</li>
</ol>
<p><span class="math display">\[
\frac{Y(s)}{R(s)}=\frac{G(s)}{1±G(s)H(s)}
\]</span></p>
<p>This formula allows us to reduce a basic feedback loop into a single block, simplifying the entire system.</p>
<ol start="4" type="1">
<li><strong>Iterative Reduction:</strong> The process is iterative. We continue to identify basic feedback loops, apply the reduction formula, and simplify the system until we obtain the desired relationship between <span class="math inline">\(Y\)</span> and <span class="math inline">\(R\)</span>.</li>
</ol>
<p>The procedure is not unique.</p>
<p>In our case we can start from:</p>
<table>
<tbody><tr>
<td>
<img src="./pics/09_Models_of_Control_Devices_and_Systems_basic_diagram.png" alt="09_Models_of_Control_Devices_and_Systems_basic_diagram" style="width: 450px;">
</td></tr>
</tbody></table>
<ul>
<li>If the input of block <span class="math inline">\(H_2\)</span> continue to be <span class="math inline">\(X\)</span> (or the output of block <span class="math inline">\(H_2\)</span> remains <span class="math inline">\(H_2X\)</span>, then we can move the take off point after the block <span class="math inline">\(G_4\)</span>. This infact ensures that the input into the rest of the diagram remains the same.</li>
</ul>
<p>We can then modify the previous diagrom to be:</p>
<table>
<tbody><tr>
<td>
<img src="./pics/09_Models_of_Control_Devices_and_Systems_MultiLoop_System_Example-1.png" alt="09_Models_of_Control_Devices_and_Systems_MultiLoop_System_Example-1" style="width: 450px;">
</td></tr>
</tbody></table>
<p>or to make the take off points more explicit:</p>
<table>
<tbody><tr>
<td>
<img src="./pics/09_Models_of_Control_Devices_and_Systems_MultiLoop_System_Example-2.png" alt="09_Models_of_Control_Devices_and_Systems_MultiLoop_System_Example-2" style="width: 450px;">
</td></tr>
</tbody></table>
<p>This last diagram makes it easy to identify the first basic feedback loop (<strong>Note that it is a positive feedback loop</strong>).</p>
<p>We can then reorganise the block diagram as:</p>
<table>
<tbody><tr>
<td>
<img src="./pics/09_Models_of_Control_Devices_and_Systems_MultiLoop_System_Example-3.png" alt="09_Models_of_Control_Devices_and_Systems_MultiLoop_System_Example-3" style="width: 450px;">
</td></tr>
</tbody></table>
<p>which, once we reduce the cascading blocks, we can write as:</p>
<table>
<tbody><tr>
<td>
<img src="./pics/09_Models_of_Control_Devices_and_Systems_MultiLoop_System_Example-4.png" alt="09_Models_of_Control_Devices_and_Systems_MultiLoop_System_Example-4" style="width: 450px;">
</td></tr>
</tbody></table>
<p>And now it is easy to see the remaining basic feedback loops. The first one is highlighted in red.</p>
<p>Finally we obtain:</p>
<table>
<tbody><tr>
<td>
<img src="./pics/09_Models_of_Control_Devices_and_Systems_MultiLoop_System_Example-5.png" alt="09_Models_of_Control_Devices_and_Systems_MultiLoop_System_Example-5" style="width: 450px;">
</td></tr>
</tbody></table>
<p>which we can reduce once more to obtain the final close loop equivalent:</p>
<table>
<tbody><tr>
<td>
<img src="./pics/09_Models_of_Control_Devices_and_Systems_MultiLoop_System_Example-6.png" alt="09_Models_of_Control_Devices_and_Systems_MultiLoop_System_Example-6" style="width: 450px;">
</td></tr>
</tbody></table>
<p><strong>Pop-up Question</strong>: Can two different block diagrams represent the same system equations?</p>
<p><strong>Answer</strong>: Yes, two different block diagrams can represent the same system equations if they capture the same relationships and dynamics.</p>
</section>
<section id="alternative-solution" class="level3">
<h3 class="anchored" data-anchor-id="alternative-solution">Alternative solution</h3>
<p>The sequence of reduction is not unique. Different approaches might yield the same result. For instance, relocating summing junctions can offer an alternative method of reduction.</p>
<table>
<tbody><tr>
<td>
<img src="./pics/09_Models_of_Control_Devices_and_Systems_MultiLoop_System_Example-7.png" alt="09_Models_of_Control_Devices_and_Systems_MultiLoop_System_Example-7" style="width: 450px;">
</td></tr>
</tbody></table>
<p>To make this change, let’s call the signal that comes out of the block <span class="math inline">\(H_1\)</span>,<span class="math inline">\(Z = H_1Y\)</span>. Since the signal <span class="math inline">\(Z\)</span> is arriving as input to <span class="math inline">\(G_3\)</span>, it means that if we move the summation before the <span class="math inline">\(G_2\)</span> block, this block will contribute to an additional gain of <span class="math inline">\(G_2\)</span>. We need to take care of this gain to have an equivalent relationship, and divide by <span class="math inline">\(G_2\)</span> in the feedback path.</p>
<table>
<tbody><tr>
<td>
<img src="./pics/09_Models_of_Control_Devices_and_Systems_MultiLoop_System_Example-8.png" alt="09_Models_of_Control_Devices_and_Systems_MultiLoop_System_Example-8" style="width: 450px;">
</td></tr>
</tbody></table>
<table>
<tbody><tr>
<td>
<img src="./pics/09_Models_of_Control_Devices_and_Systems_MultiLoop_System_Example-9.png" alt="09_Models_of_Control_Devices_and_Systems_MultiLoop_System_Example-9" style="width: 450px;">
</td></tr>
</tbody></table>
<p>or also equivalently</p>
<table>
<tbody><tr>
<td>
<img src="./pics/09_Models_of_Control_Devices_and_Systems_MultiLoop_System_Example-10.png" alt="09_Models_of_Control_Devices_and_Systems_MultiLoop_System_Example-10" style="width: 450px;">
</td></tr>
</tbody></table>
<p>We can do this because block diagrams are not representing physical systems, they are a mathematical representation.</p>
<p>In conclusion, block diagrams offer a powerful tool for system analysis and design for automatic control. By visually representing system equations, they facilitate understanding, especially for complex systems.</p>
</section>
</section>
<section id="rules-for-block-diagram-manipulation" class="level2">
<h2 class="anchored" data-anchor-id="rules-for-block-diagram-manipulation">Rules for Block Diagram Manipulation</h2>
<table>
<tbody><tr>
<td>
<img src="./pics/09_Models_of_Control_Devices_and_Systems_Rules_For_Diagram_Manipulation.png" alt="09_Models_of_Control_Devices_and_Systems_Rules_For_Diagram_Manipulation" style="width: 650px;">
</td></tr>
</tbody></table>
<hr>
</section>
</section>
<section id="signal-flow-graphs-and-the-masons-gain-formula" class="level1">
<h1>Signal Flow Graphs and the Mason’s Gain Formula</h1>
<p>In our journey to understand complex systems, we often rely on visual aids to better comprehend intricate relationships. One such tool is the signal flow graph (SFG), a graphical representation that helps us visualize the flow of signals through a system. By coupling the SFG with Mason’s Gain formula, we can derive the overall transmittance (or transfer function) of a system without resorting to extensive block diagram manipulations.</p>
<p>In this section, we’ll take a closer look at the transformation from block diagrams to signal flow graphs and how to apply Mason’s Gain formula on the resulting representation.</p>
<p>Mason’s Gain Formula is a systematic approach to find the transfer function of a complex system represented by a signal-flow graph or block diagram. The formula provides a way to determine the overall gain of a system by considering individual gains and the loops within the system. Mason’s Gain Formula is particularly useful for systems with multiple loops and intersecting paths. We will come back to this in a moment. For now, let’s focus on the Signal Flow Graphs.</p>
<section id="from-block-diagrams-to-signal-flow-graphs" class="level2">
<h2 class="anchored" data-anchor-id="from-block-diagrams-to-signal-flow-graphs">From Block Diagrams to Signal Flow Graphs</h2>
<p>Before delving into the intricacies of Mason’s Gain formula, it’s essential to understand how to convert a block diagram into its corresponding signal flow graph. This transformation is not only pivotal for better visualization but also facilitates the application of Mason’s Gain formula.</p>
<section id="understanding-nodes-and-paths-in-sfgs" class="level3">
<h3 class="anchored" data-anchor-id="understanding-nodes-and-paths-in-sfgs">Understanding Nodes and Paths in SFGs</h3>
<p>In a signal flow graph, the term “node” represents a variable or signal, while the arrows or paths between nodes represent the system gain or transmittance.</p>
<p>Let’s break down additional concepts:</p>
<ul>
<li><strong>Input Node</strong>: A node with no incoming signals. The value of such a node is externally defined. For instance, the node labeled “R” in our previous examples.</li>
<li><strong>Output Node</strong>: A node from which there are no outgoing branches. It’s essentially the end point or the result of our system.</li>
</ul>
</section>
<section id="constructing-the-signal-flow-graph" class="level3">
<h3 class="anchored" data-anchor-id="constructing-the-signal-flow-graph">Constructing the Signal Flow Graph</h3>
<p>Given the block diagram, let’s attempt to construct its corresponding signal flow graph:</p>
<ul>
<li>Identify the input node(s). In our example, R serves as the input node.</li>
<li>Trace the path from the input to the output, ensuring you only traverse a node or branch once. This is what defines a “forward path.”</li>
<li>Mark the transmittances or gains along each branch. For instance, a branch with a gain of <span class="math inline">\(G1\)</span> should be labeled as such.</li>
</ul>
<p>Let’s take a basic block with input <span class="math inline">\(R\)</span> and output <span class="math inline">\(Y\)</span>, connected through a system <span class="math inline">\(G\)</span></p>
<table>
<tbody><tr>
<td>
<img src="./pics/09_Models_of_Control_Devices_and_Systems_signal_flow_1.png" alt="09_Models_of_Control_Devices_and_Systems_signal_flow_1" style="width: 350px;">
</td></tr>
</tbody></table>
<p>Where: - <span class="math inline">\(R\)</span> is a variable - <span class="math inline">\(Y\)</span> is a variable - <span class="math inline">\(G\)</span> is the system gain</p>
<p>We can build the equivalent signal flow graph as:</p>
<table>
<tbody><tr>
<td>
<img src="./pics/09_Models_of_Control_Devices_and_Systems_signal_flow_2.png" alt="09_Models_of_Control_Devices_and_Systems_signal_flow_2" style="width: 350px;">
</td></tr>
</tbody></table>
<p>In a signal flow graph, <span class="math inline">\(R\)</span> and <span class="math inline">\(Y\)</span> become nodes, and <span class="math inline">\(G\)</span> becomes a branch transmittance.</p>
<p>The key concept in signal flow graphs is the idea of nodes representing variables and branches indicating the relationship (or gain) between these nodes.</p>
<p>To keep in mind that _The sum of incoming signals to a node gives the node’s value. The outgoing signal is the value of the node variable.</p>
<p>Consider a feedback loop where a signal <span class="math inline">\(Y\)</span> is fed back through a gain <span class="math inline">\(H\)</span>.</p>
<table>
<tbody><tr>
<td>
<img src="./pics/09_Models_of_Control_Devices_and_Systems_signal_flow_3.png" alt="09_Models_of_Control_Devices_and_Systems_signal_flow_3" style="width: 350px;">
</td></tr>
</tbody></table>
<p>To convert it to a signal flow diagram:</p>
<ul>
<li>How many variables there are? 4: <span class="math inline">\(R\)</span>, <span class="math inline">\(Y\)</span>, <span class="math inline">\(B\)</span>, <span class="math inline">\(\hat{E}\)</span>.</li>
<li>How many gains there are? 2: <span class="math inline">\(G\)</span>, <span class="math inline">\(H\)</span></li>
</ul>
<p>We start from the two variables of interest: <span class="math inline">\(R\)</span> and <span class="math inline">\(Y\)</span> and we draw them as nodes.</p>
<table>
<tbody><tr>
<td>
<img src="./pics/09_Models_of_Control_Devices_and_Systems_signal_flow_feedback_loop_1.png" alt="09_Models_of_Control_Devices_and_Systems_signal_flow_3" style="width: 350px;">
</td></tr>
</tbody></table>
<table>
<tbody><tr>
<td>
<img src="./pics/09_Models_of_Control_Devices_and_Systems_signal_flow_feedback_loop_2.png" alt="09_Models_of_Control_Devices_and_Systems_signal_flow_3" style="width: 350px;">
</td></tr>
</tbody></table>
<table>
<tbody><tr>
<td>
<img src="./pics/09_Models_of_Control_Devices_and_Systems_signal_flow_feedback_loop_3.png" alt="09_Models_of_Control_Devices_and_Systems_signal_flow_3" style="width: 350px;">
</td></tr>
</tbody></table>
<p>The previous diagram can also be represented expliciting the node <span class="math inline">\(B\)</span> and separating the <span class="math inline">\(H\)</span> and <span class="math inline">\(-1\)</span> contributions. In this case the previous representation is enough to capture the dynamics that we need.</p>
<table>
<tbody><tr>
<td>
<img src="./pics/09_Models_of_Control_Devices_and_Systems_signal_flow_feedback_loop_3_alternative.png" alt="09_Models_of_Control_Devices_and_Systems_signal_flow_3" style="width: 350px;">
</td></tr>
</tbody></table>
<p>And finally we obtain:</p>
<table>
<tbody><tr>
<td>
<img src="./pics/09_Models_of_Control_Devices_and_Systems_signal_flow_feedback_loop_4.png" alt="09_Models_of_Control_Devices_and_Systems_signal_flow_4" style="width: 350px;">
</td></tr>
</tbody></table>
<p>In the signal flow graph, the node labeled “R” doesn’t have any incoming signals. In our terminology, such a node with no incoming branches is referred to as an “input node”.</p>
<p>This is because its value is externally defined, and hence the value of the “R” node depends on what we assign to it.</p>
<p>The signal originating from “R” travels along a branch, getting multiplied by a transmittance of 1, before reaching the next node.</p>
<p>Similarly, the “Y” signal travels along its branch, getting multiplied by a transmittance of <span class="math inline">\(-H\)</span>, before it reaches its destination node. As a result, the value at this node is the algebraic sum of these two signals.</p>
<p>Meanwhile, the “<span class="math inline">\(\hat{E}\)</span>” signal travels along another branch, getting multiplied by the gain “G”, before it reaches its destination. Consequently, the value of the output node “Y” is given by $ G $.</p>
<p>Just for the sake of better visualization, if I were to introduce an additional branch (which isn’t present in the original block diagram) and label it “Y”, this addition wouldn’t impact our system equations. Essentially, this equation suggests <span class="math inline">\(Y=Y\)</span>.</p>
<table>
<tbody><tr>
<td>
<img src="./pics/09_Models_of_Control_Devices_and_Systems_signal_flow_feedback_loop_5.png" alt="09_Models_of_Control_Devices_and_Systems_signal_flow_5" style="width: 350px;">
</td></tr>
</tbody></table>
<p>While this may seem redundant, it offers an advantage in terms of clarity. We can now term this as an “output node”. An output node is characterized by having no outgoing branches, while an input node is one devoid of incoming branches. Introducing this output node helps to clearly delineate the attribute of interest.</p>
</section>
</section>
<section id="a-more-complex-example" class="level2">
<h2 class="anchored" data-anchor-id="a-more-complex-example">A more complex example</h2>
<table>
<tbody><tr>
<td>
<img src="./pics/09_Models_of_Control_Devices_and_Systems_MultiLoop_System_Example.png" alt="09_Models_of_Control_Devices_and_Systems_MultiLoop_System_Example" style="width: 650px;">
</td></tr>
</tbody></table>
<table>
<tbody><tr>
<td>
<img src="./pics/09_Models_of_Control_Devices_and_Systems_signal_flow_complex_ex_1.png" alt="09_Models_of_Control_Devices_and_Systems_signal_flow_complex_ex_1" style="width: 350px;">
</td>
<td>
<img src="./pics/09_Models_of_Control_Devices_and_Systems_signal_flow_complex_ex.png" alt="09_Models_of_Control_Devices_and_Systems_signal_flow_complex_ex" style="width: 350px;">
</td>
</tr>
</tbody></table>
<table>
<tbody><tr>
<td>
<img src="./pics/09_Models_of_Control_Devices_and_Systems_signal_flow_complex_ex_2.png" alt="09_Models_of_Control_Devices_and_Systems_signal_flow_complex_ex_2" style="width: 350px;">
</td>
<td>
<img src="./pics/09_Models_of_Control_Devices_and_Systems_signal_flow_complex_ex.png" alt="09_Models_of_Control_Devices_and_Systems_signal_flow_complex_ex" style="width: 350px;">
</td>
</tr>
</tbody></table>
<table>
<tbody><tr>
<td>
<img src="./pics/09_Models_of_Control_Devices_and_Systems_signal_flow_complex_ex_3.png" alt="09_Models_of_Control_Devices_and_Systems_signal_flow_complex_ex_3" style="width: 350px;">
</td>
<td>
<img src="./pics/09_Models_of_Control_Devices_and_Systems_signal_flow_complex_ex.png" alt="09_Models_of_Control_Devices_and_Systems_signal_flow_complex_ex" style="width: 350px;">
</td>
</tr>
</tbody></table>
<table>
<tbody><tr>
<td>
<img src="./pics/09_Models_of_Control_Devices_and_Systems_signal_flow_complex_ex_4.png" alt="09_Models_of_Control_Devices_and_Systems_signal_flow_complex_ex_4" style="width: 350px;">
</td>
<td>
<img src="./pics/09_Models_of_Control_Devices_and_Systems_signal_flow_complex_ex.png" alt="09_Models_of_Control_Devices_and_Systems_signal_flow_complex_ex" style="width: 350px;">
</td>
</tr>
</tbody></table>
<table>
<tbody><tr>
<td>
<img src="./pics/09_Models_of_Control_Devices_and_Systems_signal_flow_complex_ex_5.png" alt="09_Models_of_Control_Devices_and_Systems_signal_flow_complex_ex_5" style="width: 350px;">
</td>
<td>
<img src="./pics/09_Models_of_Control_Devices_and_Systems_signal_flow_complex_ex.png" alt="09_Models_of_Control_Devices_and_Systems_signal_flow_complex_ex" style="width: 350px;">
</td>
</tr>
</tbody></table>
<table>
<tbody><tr>
<td>
<img src="./pics/09_Models_of_Control_Devices_and_Systems_signal_flow_complex_ex_6.png" alt="09_Models_of_Control_Devices_and_Systems_signal_flow_complex_ex_6" style="width: 350px;">
</td>
<td>
<img src="./pics/09_Models_of_Control_Devices_and_Systems_signal_flow_complex_ex.png" alt="09_Models_of_Control_Devices_and_Systems_signal_flow_complex_ex" style="width: 350px;">
</td>
</tr>
</tbody></table>
</section>
</section>
<section id="introducing-masons-gain-formula" class="level1">
<h1>Introducing Mason’s Gain Formula</h1>
<p>With the signal flow graph in hand, we can now apply Mason’s Gain formula to determine the system’s overall transmittance (output variable / input variable) or closed-loop transfer function (all variables have been ported in the Laplace domain).</p>
<p>The formula is given by:</p>
<p><span class="math display">\[
\frac{Y(s)}{R(s)} = M(s) = \frac{\sum P_k\Delta_k}{\Delta}
\]</span></p>
<p>Where: - <span class="math inline">\(M(s)\)</span> represents the overall transmittance or closed-loop transfer function.</p>
<p>Let’s delve into the details of the formula:</p>
<section id="understanding-large-delta" class="level4">
<h4 class="anchored" data-anchor-id="understanding-large-delta">Understanding <span class="math inline">\(\large \Delta\)</span></h4>
<ul>
<li><span class="math inline">\(\Delta\)</span> = 1−(sum of gains of all independent loops) + (sum of gain products of pairs of non-touching loops) − (sum of gain products of triplets of non-touching loops) + …</li>
</ul>
<p>It’s crucial to understand the concept of: - “<strong>Loops</strong>”. A closed path in which a node or branch is traversed once and only once. In other words, starting from any point in the path, if you follow the arrows or directions indicated, you should return to the starting point without retracing any part of the path or revisiting any node or branch. For example:</p>
<table>
<tbody><tr>
<td>
<img src="./pics/09_Models_of_Control_Devices_and_Systems_signal_flow_complex_ex_loop.png" alt="09_Models_of_Control_Devices_and_Systems_signal_flow_complex_ex_loop" style="width: 450px;">
</td>
</tr>
</tbody></table>
<p>A few key points to note about loops:</p>
<ol type="1">
<li>Direction Matters: The traversal should strictly follow the direction indicated by the arrows in the SFG.</li>
<li>No Revisiting: No node or branch should be revisited or retraced in the loop.</li>
<li>Loop Gain: It is the product of all the transmittances (or gains) of the branches that constitute the loop. For example, the Loop Gain, for the loop highligthed in red above, is: <span class="math inline">\(G_2\times G_3\times -H_2\)</span></li>
</ol>
<ul>
<li>“<strong>Independent loops</strong>”: Independent loops are loops where each loop has at least something (a node or a branch) different than the other loops. If you are considering <span class="math inline">\(X\)</span> loops as independent, then all of these loops should have some element that differentiates them from the other loops in the set. When identifying a set of independent loops in a signal flow graph, every loop in that set should have at least one unique node or branch that is not shared with any other loop in that set.</li>
</ul>
<p>For example, in our Signal Flow Graph there are three independent loops. They have at least a node or a branch that is different.</p>
<ul>
<li>“<strong>Non-touching loops.</strong>” Two loops are considered non-touching if they do not share any common node or branch. This distinction is vital when applying Mason’s Gain formula.</li>
</ul>
</section>
<section id="understanding-p_k" class="level4">
<h4 class="anchored" data-anchor-id="understanding-p_k">Understanding <span class="math inline">\(P_k\)</span></h4>
<ul>
<li><span class="math inline">\(P_k\)</span> denotes the gain of the <span class="math inline">\(k\)</span>-th forward path.</li>
<li><span class="math inline">\(k\)</span> is the number of forward paths.</li>
</ul>
<p>For example, <span class="math inline">\(P_1\)</span> is the gain of the first forward path. A forward path is the path that takes you from the input to the output node.</p>
<table>
<tbody><tr>
<td>
<img src="./pics/09_Models_of_Control_Devices_and_Systems_signal_flow_complex_ex_forward_path.png" alt="09_Models_of_Control_Devices_and_Systems_signal_flow_complex_ex_forward_path" style="width: 450px;">
</td>
</tr>
</tbody></table>
<p>In this example, there is only one way to travel from <span class="math inline">\(R\)</span> to <span class="math inline">\(Y\)</span>. There is no alternative forward path and hence there one and only <span class="math inline">\(P_1\)</span>.</p>
<p>The gain is hence: $P_1 = G_1 G_2 G_3 G_4 $</p>
</section>
<section id="understanding-delta_k" class="level4">
<h4 class="anchored" data-anchor-id="understanding-delta_k">Understanding <span class="math inline">\(\Delta_k\)</span></h4>
<p><span class="math inline">\(\Delta_k\)</span> is the value of <span class="math inline">\(\Delta\)</span> when computed for the system <em>excluding</em> (“not touching”) the <span class="math inline">\(k\)</span>-th forward path. In simpler terms, <span class="math inline">\(\Delta_k\)</span> is calculated using the same formula as <span class="math inline">\(\Delta\)</span> but ignoring all loops that touch or intersect with the <span class="math inline">\(k\)</span>-th forward path.</p>
<p>To explain further:</p>
<ul>
<li><p><strong>Forward Path</strong>: A forward path is a traversal from the input node to the output node in the direction of the arrows without any repetition of nodes or branches. The k-th forward path refers to a specific forward path that we are focusing on.</p></li>
<li><p><strong>Not Touching the k-th Forward Path</strong>: This means that when calculating <span class="math inline">\(\Delta_k\)</span>, we exclude all loops that have any node or branch in common with the k-th forward path.</p></li>
</ul>
<p>We use the same definition we gave for <span class="math inline">\(\Delta\)</span> but all the terms must not “touch” the <span class="math inline">\(k-\)</span>th forward path, which means that they do not have anything in common (branch or node) with the <span class="math inline">\(k-\)</span>th forward path.</p>
<p>For example:</p>
<p><span class="math inline">\(\Delta_1\)</span> = 1 - (sum of gains of all independent loops <strong>not touching the 1st forward path</strong>) + (sum of gain products of pairs of non-touching loops <strong>not touching the 1st forward path</strong>) − (sum of gain products of triplets of non-touching loops <strong>not touching the 1st forward path</strong>) + …</p>
<p>Let’s apply all this to the Signal Flow Graph:</p>
<table>
<tbody><tr>
<td>
<img src="./pics/09_Models_of_Control_Devices_and_Systems_signal_flow_complex_ex_mason_formula.png" alt="09_Models_of_Control_Devices_and_Systems_signal_flow_complex_ex_mason_formula" style="width: 450px;">
</td>
</tr>
</tbody></table>
<ul>
<li>First of all, we need to identify the value of <span class="math inline">\(k\)</span>, which is 1 in this case. A node or a branch in fact must be traversed once and only once.</li>
</ul>
<p><span class="math display">\[
\frac{Y(s)}{R(s)} = M(s) = \frac{\sum P_k\Delta_k}{\Delta} = \frac{P_1\Delta_1}{\Delta}
\]</span></p>
<ul>
<li><span class="math inline">\(\Delta\)</span> = 1−(sum of gains of all independent loops) + (sum of gain products of pairs of non-touching loops) − (sum of gain products of triplets of non-touching loops) + …</li>
</ul>
<p><span class="math inline">\(\Delta = 1 − \Big[ \Big( -G_2G_3H_2 \Big) + \Big(G_3G_4H_1 \Big) + \Big(-G_1G_2G_3G_4H_3 \Big)\Big]\)</span></p>
<p>Note that there are no pairs of non-touching loops. At least a node or a branch is common in all the loops. Since there are no pairs, there are no triplets, etc.</p>
<ul>
<li><span class="math inline">\(\Delta_1\)</span></li>
</ul>
<p><span class="math inline">\(\Delta_1=1\)</span>.</p>
<p>All loops have something in common with the forward path.</p>
<ul>
<li><span class="math inline">\(P_1\)</span></li>
</ul>
<p>$P_1 = G_1 G_2 G_3 G_4 $</p>
<p>And we have everything we need to write the overall closed loop transfer function on the system.</p>
</section>
<section id="example" class="level3">
<h3 class="anchored" data-anchor-id="example">Example</h3>
<table>
<tbody><tr>
<td>
<img src="./pics/09_Models_of_Control_Devices_and_Systems_signal_flow_complex_ex1.png" alt="09_Models_of_Control_Devices_and_Systems_signal_flow_complex_ex1" style="width: 550px;">
</td>
</tr>
</tbody></table>
<p><span class="math display">\[
\frac{Y(s)}{R(s)} = M(s) = \frac{\sum P_k\Delta_k}{\Delta}
\]</span></p>
<p><span class="math display">\[k=2\]</span></p>
<table>
<tbody><tr>
<td>
<img src="./pics/09_Models_of_Control_Devices_and_Systems_signal_flow_complex_ex1_1.png" alt="09_Models_of_Control_Devices_and_Systems_signal_flow_complex_ex1_1" style="width: 550px;">
</td>
</tr>
</tbody></table>
<p><span class="math inline">\(P_1 = G_{12}G_{23}G_{34}G_{45}\)</span></p>
<p><span class="math inline">\(P_2 = G_{12}G_{23}G_{35}\)</span></p>
<p>Note that <span class="math inline">\(G_{44}\)</span> is a closed loop so cannot be included.</p>
<p>There are 5 loops:</p>
<table>
<tbody><tr>
<td>
<img src="./pics/09_Models_of_Control_Devices_and_Systems_signal_flow_complex_ex1_2.png" alt="09_Models_of_Control_Devices_and_Systems_signal_flow_complex_ex1_2" style="width: 550px;">
</td>
</tr>
</tbody></table>
<p>And we can calculate the loop gains for these loop.</p>
<p>Note that <span class="math inline">\(G_{34},G_{45},G_{35}\)</span> is not a loop because direction matters!.</p>
<p>There is two pairs of non-touching loops.</p>
<p>The first one is:</p>
<table>
<tbody><tr>
<td>
<img src="./pics/09_Models_of_Control_Devices_and_Systems_signal_flow_complex_ex1_3.png?1" alt="09_Models_of_Control_Devices_and_Systems_signal_flow_complex_ex1_3" style="width: 550px;">
</td>
</tr>
</tbody></table>
<p>And its gain is: <span class="math inline">\(G_{23}G_{32}G_{44}\)</span>.</p>
The second one is:
<table>
<tbody><tr>
<td>
<img src="./pics/09_Models_of_Control_Devices_and_Systems_signal_flow_complex_ex1_4.png?1" alt="09_Models_of_Control_Devices_and_Systems_signal_flow_complex_ex1_4" style="width: 550px;">
</td>
</tr>
</tbody></table>
<p>And its gain is: <span class="math inline">\(G_{23}G_{35}G_{52}\)</span>.</p>
<p>And we need to sum them up in the formula for <span class="math inline">\(\Delta\)</span></p>
<p>No triplets.</p>
<p>Finally: - <span class="math inline">\(\Delta_1 = 1\)</span> because all loops are touching the forward path. - <span class="math inline">\(\Delta_2 = 1-G_{44}\)</span> because it is the only loop that does not touch the <strong>2nd</strong> forward path.</p>
<p>We have all the elements to calculate the Mason’s gain formula and obtain the closed loop transfer function.</p>
</section>
<section id="what-is-the-self-loop" class="level3">
<h3 class="anchored" data-anchor-id="what-is-the-self-loop">What is the self loop?</h3>
<p>A self-loop, in the context of signal flow graphs, refers to a feedback loop where a signal or variable directly influences itself, often through some transformation. Essentially, a portion of the output is fed back directly to its own input.</p>
The second one is:
<table>
<tbody><tr>
<td>
<img src="./pics/09_Models_of_Control_Devices_and_Systems_signal_flow_complex_ex1_5.png" alt="09_Models_of_Control_Devices_and_Systems_signal_flow_complex_ex1_5" style="width: 550px;">
</td>
</tr>
</tbody></table>
<p>Let’s break this down:</p>
<ul>
<li>You have a block (or system) with an input and an output.</li>
<li>The output is fed back to the input through a feedback system or gain.</li>
<li>There is a summing junction at the input that combines the original input with the feedback from the output.</li>
</ul>


</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp("https:\/\/andreamunafo\.github\.io\/principles-of-automatic-controls");
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




<footer class="footer"><div class="nav-footer"><div class="nav-footer-center"><div class="toc-actions d-sm-block d-md-none"><ul><li><a href="https://github.com/andreamunafo/principles-of-automatic-controls/issues/new" class="toc-action"><i class="bi bi-github"></i>Report an issue</a></li></ul></div></div></div></footer></body></html>